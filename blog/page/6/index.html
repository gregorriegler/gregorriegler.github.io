<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Gregor Riegler &middot; Merciless Refactorer - page 6
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
<meta name="description" content="Gregor Riegler, Software Development Coach."/>
</head>


  <body class="default">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Gregor Riegler
      </a>
    </div>
    <p class="lead">Merciless Refactorer</p>
  </header>
  <nav id="sidebar-nav-links">
  

  


  

  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
      <a class="page-link "
          href="/about">About</a>
    
  

  
    
      <a class="page-link "
          href="/blog">Blog</a>
    
  

  
    
      <a class="page-link "
          href="/speaking">Public Speaking</a>
    
  

  
    
      <a class="page-link "
          href="/refactoring-java/">Refactoring Java Series</a>
    
  



  

  

  


  

  

  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  
    
  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>


  

  <nav id="sidebar-icon-links">

  <a id="bluesky-link"
     class="icon" title="Bluesky" aria-label="Bluesky"
     href="https://bsky.app/profile/gregorriegler.com">
    <?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="21" viewBox="0 0 600 530" version="1.1" xmlns="http://www.w3.org/2000/svg">
 <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>
</svg>

  </a>

  <a id="mastodon-link"
     class="icon" title="Mastodon" aria-label="Mastodon"
     href="https://fosstodon.org/@gregorriegler">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="26" viewBox="0 0 216.4144 232.00976">
  <defs>
    <mask id="mastodon-mask">
      <rect width="100%" height="100%" fill="white"/>
      <path d="M177.50984 80.077v60.94125h-24.14375v-59.15c0-12.46875-5.24625-18.7975-15.74-18.7975-11.6025 0-17.4175 7.5075-17.4175 22.3525v32.37625H96.20734V85.42325c0-14.845-5.81625-22.3525-17.41875-22.3525-10.49375 0-15.74 6.32875-15.74 18.7975v59.15H38.90484V80.077c0-12.455 3.17125-22.3525 9.54125-29.675 6.56875-7.3225 15.17125-11.07625 25.85-11.07625 12.355 0 21.71125 4.74875 27.8975 14.2475l6.01375 10.08125 6.015-10.08125c6.185-9.49875 15.54125-14.2475 27.8975-14.2475 10.6775 0 19.28 3.75375 25.85 11.07625 6.36875 7.3225 9.54 17.22 9.54 29.675" fill="black"/>
    </mask>
  </defs>
  <path d="M211.80734 139.0875c-3.18125 16.36625-28.4925 34.2775-57.5625 37.74875-15.15875 1.80875-30.08375 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.39125 27.9425 21.11625.7225 39.91875-5.20625 39.91875-5.20625l.8675 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23234 213.82 1.40609 165.31125.20859 116.09125c-.365-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67234 3.45375 78.20359.2425 107.86484 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.975 14.7525 32.975 65.0825 0 0 .41375 37.13375-4.59875 62.915" mask="url(#mastodon-mask)"/>
</svg>

  </a>

  <a id="linkedin-link"
     class="icon" title="LinkedIn" aria-label="LinkedIn"
     href="https://www.linkedin.com/in/gregorriegler/">
    <?xml version="1.0" ?>
<svg height="24" viewBox="0 0 72 72" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M62,62 L51.315625,62 L51.315625,43.8021149 C51.315625,38.8127542 49.4197917,36.0245323 45.4707031,36.0245323 C41.1746094,36.0245323 38.9300781,38.9261103 38.9300781,43.8021149 L38.9300781,62 L28.6333333,62 L28.6333333,27.3333333 L38.9300781,27.3333333 L38.9300781,32.0029283 C38.9300781,32.0029283 42.0260417,26.2742151 49.3825521,26.2742151 C56.7356771,26.2742151 62,30.7644705 62,40.051212 L62,62 Z M16.349349,22.7940133 C12.8420573,22.7940133 10,19.9296567 10,16.3970067 C10,12.8643566 12.8420573,10 16.349349,10 C19.8566406,10 22.6970052,12.8643566 22.6970052,16.3970067 C22.6970052,19.9296567 19.8566406,22.7940133 16.349349,22.7940133 Z M11.0325521,62 L21.769401,62 L21.769401,27.3333333 L11.0325521,27.3333333 L11.0325521,62 Z"/>
</svg>
  </a>
  
  <a id="github-link"
     class="icon" title="Github" aria-label="Github"
     href="https://github.com/gregorriegler">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

  </a>

  <a id="youtube-link"
     class="icon" title="Youtube" aria-label="Youtube"
     href="https://www.youtube.com/channel/UCsWg_i6X4KMhjD2CRqCJLdg">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="96.875px" height="96.875px" viewBox="0 0 96.875 96.875" style="enable-background:new 0 0 96.875 96.875;"
	 xml:space="preserve">
<g>
	<path d="M95.201,25.538c-1.186-5.152-5.4-8.953-10.473-9.52c-12.013-1.341-24.172-1.348-36.275-1.341
		c-12.105-0.007-24.266,0-36.279,1.341c-5.07,0.567-9.281,4.368-10.467,9.52C0.019,32.875,0,40.884,0,48.438
		C0,55.992,0,64,1.688,71.336c1.184,5.151,5.396,8.952,10.469,9.52c12.012,1.342,24.172,1.349,36.277,1.342
		c12.107,0.007,24.264,0,36.275-1.342c5.07-0.567,9.285-4.368,10.471-9.52c1.689-7.337,1.695-15.345,1.695-22.898
		C96.875,40.884,96.889,32.875,95.201,25.538z M35.936,63.474c0-10.716,0-21.32,0-32.037c10.267,5.357,20.466,10.678,30.798,16.068
		C56.434,52.847,46.23,58.136,35.936,63.474z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>

  <a id="goodreads-link"
     class="icon" title="goodreads" aria-label="goodreads"
     href="https://www.goodreads.com/user/show/22567057-gregor-riegler">
    <?xml version="1.0" ?><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
	.st0{}
	.st1{fill:#202020;}
</style><g id="Edges"/><g id="Background_1_"><path class="st0" d="M492,268.3c-6.3,122.8-109.9,224.4-236.5,224.5c-126.7,0.1-230.7-101.6-237-224.5   C11.7,136.2,119.6,19.2,255.2,19.2C390.9,19.2,498.7,136.3,492,268.3z"/></g><g id="Symbol"><path class="st1" d="M346.6,137.5c0-4.3-0.4-8.6-0.6-12.8c-9.2,0-16.9,0-25.6,0c0,9.8,0,18.9,0,28.1   c-41.1-57.3-125.6-39.2-149.4,17.9c-15.2,36.6-14.4,73.4,1.5,109.4c16.8,38,65,54.1,102.8,43.4c2-0.3,4.3-0.9,6.8-1.7   c3.6-1.1,6.7-2.5,8.7-3.6c5.2-2.1,11.4-5.6,17.5-10.3c4.9-3.8,9.1-7.8,12.4-11.5c-0.9,14.3-1.3,28.7-3.6,42.8   c-2.8,17.4-10.8,32.4-27.4,41.2c-36.2,19.2-79.6,4.6-96-32.4c-8.2,0-16.6,0-25.4,0c1.8,24.4,14.7,40.3,34.7,50.6   c24.1,12.4,49.9,13.7,76.2,9.4c33.5-5.5,55.3-24.4,63-57.8c2.7-11.9,4.2-24.2,4.3-36.4C346.8,255,346.6,196.2,346.6,137.5z    M316.5,260.3c-4.8,13.8-12.8,24.7-23.3,32.2c-2.6,1.9-15.4,10.8-34.1,11.7c-1.1,0.1-4.2,0.2-8,0c-0.1,0.1-0.3,0.1-0.4,0.1   c-27.3-1.7-48.2-17.6-57.4-43.9c-7.7-22.1-7.9-44.6-2.3-67.1c8.1-32.5,31.6-52.4,61.6-53.2c0.7-0.1,1.1-0.1,1.1-0.1   c15.6-1.4,27.8,5.1,31.6,7.2c16.1,8.6,28.2,24.6,33.5,46C324.4,215.7,324.2,238.2,316.5,260.3z"/></g></svg>
  </a>

  <a id="email-link"
     class="icon" title="e-mail" aria-label="e-mail"
     href="mailto:rieglerg85@gmail.com">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 493.332 493.332" style="enable-background:new 0 0 493.332 493.332;" xml:space="preserve">
<g id="XMLID_78_">
	<g id="XMLID_79_">
		<g id="XMLID_80_">
			<path id="XMLID_81_" d="M352.731,450.956c3.037,9.789-2.044,20.213-11.616,23.878c-35.811,13.709-69.294,18.498-112.873,18.498
				c-117.663,0-221.147-84.347-221.147-223.275C7.095,125.46,112.003,0,272.2,0c124.735,0,214.036,85.764,214.036,204.845
				c0,103.483-58.12,168.693-134.66,168.693c-33.327,0-57.419-17.007-60.955-54.582h-1.424c-21.963,36.15-53.86,54.582-91.43,54.582
				c-46.082,0-79.376-34.022-79.376-92.142c0-86.475,63.769-165.147,165.841-165.147c18.691,0,38.9,2.795,55.909,7.172
				c16.425,4.227,26.861,20.236,24.147,36.978l-16.972,104.695c-7.072,41.818-2.112,60.953,17.721,61.666
				c30.475,0.711,68.762-38.272,68.762-119.786c0-92.15-59.543-163.732-169.41-163.732c-108.444,0-203.428,85.051-203.428,220.436
				c0,118.369,75.834,185.708,181.448,185.708c27.489,0,56.203-4.51,80.853-13.214c5.863-2.07,12.315-1.662,17.872,1.126
				c5.558,2.788,9.753,7.716,11.595,13.655L352.731,450.956z M293.954,181.362c0.534-3.626-1.892-7.027-5.496-7.696
				c-4.413-0.819-9.536-1.426-15.573-1.426c-46.771,0-83.617,46.076-83.617,100.653c0,26.94,12.037,43.946,35.423,43.946
				c26.231,0,53.876-33.31,60.265-74.425L293.954,181.362z"/>
		</g>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  

  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <p class="license">
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0; margin: 0 0 .5rem" width="20" src="/assets/img/cc_icon_white_x2.png" /></a>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a> by <a href="http://gregorriegler.com">Gregor Riegler</a>.
  Layout: &copy; 2025.  <a href="/THEME_LICENSE.md">MIT License.</a>
</p>

</div>

    <main class="container">
      <div class="content">
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/04/26/standalone-java-webapp-made-easy-with.html">
        Standalone Java Webapp made easy with Maven
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">26 Apr 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <h2>Introduction </h2>As you may already know, creating a war archive and deploying it on a preinstalled Servlet Container is not the only way running a Java webapp, since you can also embed the Web-Server in the application itself. Sometimes such artifacts are delivered as standalone executable programs that can be easily started and stopped in the commandline and even run as a service in the background. Maybe you should also consider producing your app this way and benefit from its huge advantages:<br /><ul><li>No preinstalled Webserver/Servlet Container required that would take additional maintenance.</li><li>Easy Cross-Platform. Same artifact can of course be run on any System.</li><li>Complete Standalone Software </li></ul><a href="http://www.sonarsource.org/">Apache Sonar</a> is a great Example of such Software. It uses an embedded Jetty Server and creates an embedded H2 Database for persistence that can be replaced in configuration. As you can see <a href="http://svn.codehaus.org/sonar/trunk/sonar-application/src/main/assembly/bin/">here</a> they prepared startup scripts for any Platform that execute the actual <a href="http://svn.codehaus.org/sonar/trunk/sonar-application/src/main/java/org/sonar/application/StartServer.java">StartServer</a> class.<br /><h2>Embedded Tomcat</h2>In my tutorial ill use an embedded Tomcat as a Servlet Container. So we want to add the Maven dependencies first.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: grey;">&lt;!-- embedded Tomcat --&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-core<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-logging-log4j<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-jasper<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /></pre></td></tr></tbody></table></div><br />We can use them now to create a StartServer class<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">final</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">StartServer</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #0060b0; font-weight: bold;">StartServer</span><span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">static</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">main</span><span style="color: #303030;">(</span>String<span style="color: #303030;">[]</span> args<span style="color: #303030;">)</span> <span style="color: green; font-weight: bold;">throws</span> Exception <span style="color: #303030;">{</span><br />        <br />        <span style="color: grey;">// We will set the basedir Systemproperty accordingly when running the Program</span><br />        <span style="color: grey;">// Actually the mavenplugin appassembler will do this for us</span><br />        String basedir <span style="color: #303030;">=</span> System<span style="color: #303030;">.</span><span style="color: #0000c0;">getProperty</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"basedir"</span><span style="color: #303030;">);</span><br />        String webappLocation <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> File<span style="color: #303030;">(</span>basedir <span style="color: #303030;">+</span> <span style="background-color: #fff0f0;">"/webapp"</span><span style="color: #303030;">).</span><span style="color: #0000c0;">getAbsolutePath</span><span style="color: #303030;">();</span><br />        <span style="color: #303090; font-weight: bold;">int</span> port <span style="color: #303030;">=</span> <span style="color: #0000d0; font-weight: bold;">8080</span><span style="color: #303030;">;</span><br /><br />        Tomcat tomcat <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> Tomcat<span style="color: #303030;">();</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">setPort</span><span style="color: #303030;">(</span>port<span style="color: #303030;">);</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">addWebapp</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"/"</span><span style="color: #303030;">,</span> webappLocation<span style="color: #303030;">);</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">start</span><span style="color: #303030;">();</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">getServer</span><span style="color: #303030;">().</span><span style="color: #0000c0;">await</span><span style="color: #303030;">();</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><h2>Exploded War</h2>Now we need to make an exploded war in our "target" directory. I choose to create a folder inside "target" that holds the application as a whole including bin files, configuration and the webapp itself. This makes it easy to transport the complete app to another machine.<br /><ul><li>src/... </li><li>target/myapp/bin</li><li>target/myapp/conf</li><li>target/myapp/webapp</li></ul>Ill include the maven-war-plugin to create the exploded war.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>maven-war-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>2.3<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;id&gt;</span>war-exploded<span style="color: #007000;">&lt;/id&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>package<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>exploded<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />            <span style="color: #007000;">&lt;configuration&gt;</span><br />                <span style="color: #007000;">&lt;webappDirectory&gt;</span>${project.build.directory}/myapp/webapp<span style="color: #007000;">&lt;/webappDirectory&gt;</span><br />                <span style="color: #007000;">&lt;archiveClasses&gt;</span>true<span style="color: #007000;">&lt;/archiveClasses&gt;</span><br />            <span style="color: #007000;">&lt;/configuration&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />If you run <i>mvn clean package</i> right now you should get your webapp compiled into <i>target/myapp/webapp</i><br /><h2>Startup Scripts</h2>Finally we need startup Scripts to actually run our application. We need a shell script for unix Systems and a bat file for Windows. The <a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/">Appassembler</a> maven plugin comes in handy here. It is a very thoughtout plugin that creates exactly what we need and even sets the basedir Systemproperty. I'll configure it to use our exploded webapp and StartServer class.<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.codehaus.mojo<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>appassembler-maven-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>1.3<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;configuration&gt;</span><br />        <span style="color: #007000;">&lt;assembleDirectory&gt;</span>${project.build.directory}/myapp<span style="color: #007000;">&lt;/assembleDirectory&gt;</span><br />        <span style="color: #007000;">&lt;repositoryLayout&gt;</span>flat<span style="color: #007000;">&lt;/repositoryLayout&gt;</span><br />        <span style="color: #007000;">&lt;repositoryName&gt;</span>webapp/WEB-INF/lib<span style="color: #007000;">&lt;/repositoryName&gt;</span><br />        <span style="color: #007000;">&lt;generateRepository&gt;</span>false<span style="color: #007000;">&lt;/generateRepository&gt;</span><br />        <span style="color: #007000;">&lt;copyConfigurationDirectory&gt;</span>true<span style="color: #007000;">&lt;/copyConfigurationDirectory&gt;</span><br />        <span style="color: #007000;">&lt;configurationDirectory&gt;</span>conf<span style="color: #007000;">&lt;/configurationDirectory&gt;</span><br />        <span style="color: #007000;">&lt;programs&gt;</span><br />            <span style="color: #007000;">&lt;program&gt;</span><br />                <span style="color: #007000;">&lt;mainClass&gt;</span>com.myapp.StartServer<span style="color: #007000;">&lt;/mainClass&gt;</span><br />                <span style="color: #007000;">&lt;name&gt;</span>myapp<span style="color: #007000;">&lt;/name&gt;</span><br />            <span style="color: #007000;">&lt;/program&gt;</span><br />        <span style="color: #007000;">&lt;/programs&gt;</span><br />    <span style="color: #007000;">&lt;/configuration&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>package<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>assemble<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />Done. Appassembler now creates executable scripts for all platforms inside the <i>target/myapp/bin</i> directory. You could even put configuration files into <i>src/main/config</i> that would be copied into <i>target/myapp/conf</i> automatically by the plugin.<br /><br /><h2>Result</h2><br />If we run mvn clean package now we get a completely transportable standalone webapp in our <i>target</i> directory!<br /><br /><h2></h2><h2></h2>
    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/04/26/standalone-java-webapp-made-easy-with.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/04/10/i18n-of-jpa-entities.html">
        I18n of JPA Entities
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">10 Apr 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Sadly the support for i18n for Entities in JPA is actually very poor to non-existent. There's just basically no out of the box solution provided by Hibernate &amp; Co, although i18n is a feature that could be considered mandatory for a powerful ORM Framework. If you take a look at PHP for example Doctrine supports i18n very well. So besides some really unpopular i18n extensions on forums/github you are basically on your own.<br /><br /><h3>So how do you do it? </h3>There isn't really a general solution to achieve i18n. There are many different ways and you have to choose which is actually best for you. If you do have a relatively small amount of data and ordering by translations is not necessary you can store "keys" in your tables that are being translated by Spring i18n for example. Spring i18n could store the translations in separate property files. Since you wont have to worry about performance, this is a very easy way to achieve i18n.<br /><br />But lets say you have lots of data, and you need to order it on the database side. With such requirements you are better off storing translations inside your database tables. While there are guides, and also an opensource framework on the internet that implement i18n with one centralized translation-table that holds all translations i highly recommend not to follow that idea. The problem with this solution is, that you will have to add one more join for every field that has to be translated, whereas multiple joins for a single table with lots of data can easily become a performanceissue.<br />Its better to follow the approach to create a separate translation-table for every entity. This means that you would have one entity containing simple data, and another one containing only the fields that require translation. Like so:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-VacC_XOpFys/UWWoiXynYII/AAAAAAAAABc/JXllBcRFazE/s1600/i18n_jpa.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="140" src="http://3.bp.blogspot.com/-VacC_XOpFys/UWWoiXynYII/AAAAAAAAABc/JXllBcRFazE/s320/i18n_jpa.png" width="320" /></a></div><br />This schema is pretty normalized and you only have a single join on fetching an entity, while you can still order appropriate.<br /><br />Your entities would look like this:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #505050; font-weight: bold;">@Entity</span><br /><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Book</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String author<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Date releaseDate<span style="color: #303030;">;</span><br /><br />    <span style="color: #505050; font-weight: bold;">@OneToMany</span><br />    <span style="color: #505050; font-weight: bold;">@JoinColumn</span><span style="color: #303030;">(</span>name <span style="color: #303030;">=</span> <span style="background-color: #fff0f0;">"isbn"</span><span style="color: #303030;">)</span><br />    <span style="color: green; font-weight: bold;">private</span> List<span style="color: #303030;">&lt;</span>BookTranslation<span style="color: #303030;">&gt;</span> translations<span style="color: #303030;">;</span><br /><br />    <span style="color: grey;">// constructor, getters and setters -...</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />and that<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #505050; font-weight: bold;">@Entity</span><br /><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookTranslation</span> <span style="color: green; font-weight: bold;">implements</span> Serializable <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> String locale<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String title<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String description<span style="color: #303030;">;</span><br /><br />    <span style="color: grey;">// constructor, getters and setters -...</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />You could then fetch a book with its translations with:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">select</span> b <span style="color: green; font-weight: bold;">from</span> Book b <span style="color: green; font-weight: bold;">join</span> <span style="color: green; font-weight: bold;">fetch</span> b.translations bt <span style="color: green; font-weight: bold;">where</span> bt.locale <span style="color: #303030;">=</span> <span style="background-color: #fff0f0;">'de'</span>;<br /></pre></div><br />If you cannot accept your ServiceLayer to deliver two entities for every Book only because of translations, i suggest you to implement some <a href="http://en.wikipedia.org/wiki/Data_transfer_object">DTO</a> like this BookTO which holds all values.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookTO</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String author<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Date releaseDate<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String title<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String description<span style="color: #303030;">;</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />You'd just need to map the values of Book and BookTranslation to BookTO within your ServiceLayer and also return BookTO instead of Book in your ServiceLayer.<br /><br />This solution might not always be the most appropriate, but it definitely comes in handy sometimes. 
    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/04/10/i18n-of-jpa-entities.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/24/automated-class-diagrams-using-maven.html">
        Automatically generated Class Diagrams using Maven & UMLGraph
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">24 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Drawing Class Diagrams preemptive is sometimes nice to optimize your thought of design. But it will still most likely change in the development phase. Since your Class Diagram is part of your documentation it should be up to date all the time. There is no point in having a Class Diagram if the code does not fit it. You could keep adapting the changes to the Class Diagram by hand, but that can get very time-consuming and exhausting. You should rather automate that process, and there are several ways to achieve exactly that. You could for example search for a UML Class Diagram Tool supporting roundtrip engineering. There are some commercial, and even some free ones available. Not all of them work very well and it can be a frustrating task to figure out which way to go. You would probably try out some and throw them away because they are just not what you expected.<br />Thats why i want to show you a different approach: Letting a Javadoc Doclet draw the Class Diagrams in build phase and embed them into your javadoc automatically. UMLGraph is such a doclet. It analyzes your code, draws Class Diagrams automatically and embed them into your javadoc.<br /><br />Since maven can run javadoc at build phase it's perfect. You just have to configurate the maven-javadoc-plugin to use UMLGraph.<br /><br /><h3>Configurate Maven to use UMLGraph</h3><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;reporting&gt;</span>                                                                              <br />    <span style="color: #007000;">&lt;plugins&gt;</span>                                                                            <br />        <span style="color: #007000;">&lt;plugin&gt;</span>                                                                         <br />            <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #007000;">&lt;/groupId&gt;</span>                                  <br />            <span style="color: #007000;">&lt;artifactId&gt;</span>maven-javadoc-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span>                                <br />            <span style="color: #007000;">&lt;version&gt;</span>2.9<span style="color: #007000;">&lt;/version&gt;</span>                                                       <br />            <span style="color: #007000;">&lt;configuration&gt;</span>                                                              <br />                <span style="color: #007000;">&lt;doclet&gt;</span>org.umlgraph.doclet.UmlGraphDoc<span style="color: #007000;">&lt;/doclet&gt;</span>                         <br />                <span style="color: #007000;">&lt;docletArtifact&gt;</span>                                                         <br />                    <span style="color: #007000;">&lt;groupId&gt;</span>org.umlgraph<span style="color: #007000;">&lt;/groupId&gt;</span>                                      <br />                    <span style="color: #007000;">&lt;artifactId&gt;</span>umlgraph<span style="color: #007000;">&lt;/artifactId&gt;</span>                                    <br />                    <span style="color: #007000;">&lt;version&gt;</span>5.6<span style="color: #007000;">&lt;/version&gt;</span>                                               <br />                <span style="color: #007000;">&lt;/docletArtifact&gt;</span>                                                        <br />                <span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span>                           <br />                <span style="color: #007000;">&lt;useStandardDocletOptions&gt;</span>true<span style="color: #007000;">&lt;/useStandardDocletOptions&gt;</span>                <br />            <span style="color: #007000;">&lt;/configuration&gt;</span>                                                             <br />        <span style="color: #007000;">&lt;/plugin&gt;</span>                                                                        <br />    <span style="color: #007000;">&lt;/plugins&gt;</span>                                                                           <br /><span style="color: #007000;">&lt;/reporting&gt;</span>                                                                             <br /></pre></td></tr></tbody></table></div><br /><span style="color: red;">Beware that the javadoc doclet api has changed from jdk 1.6 to jdk 1.7 and most of the online tutorials are outdated because of that. UMLGraph adapted to jdk 1.7 since <a href="http://www.umlgraph.org/ver.html">version 5.5</a>.</span><br /><br />If we run <u>mvn site</u> right now, we will just get that error:<br /><b><span class="postbody"><a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: Cannot run program "dot": <a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: error=2, No such file or directory&nbsp;</span></b><br /><span class="postbody">This means that the program dot was not found which is a part of the graphviz library.</span><br /><span class="postbody">&nbsp;</span><b><span class="postbody"> </span></b><br /><h3>Install Graphviz</h3>For UMLGraph to run you need <a href="http://www.graphviz.org/">graphviz</a> installed. Go to the Download Page, and choose your package. On linux you could even <i><b>sudo aptget install graphviz</b></i>. Beware that you might have to reboot or relogin to use graphviz, because the Systems Path is extended during installation.<br /><br /><h3>First Result</h3>Run <u>mvn site</u>, and open target/site/apidocs/index.html afterwards.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" /></a></div><br />As you can see its drawing beautiful and accurate UML Class Diagrams.<br /><br /><h3>Custom Configuration</h3>If you dont want attributes/methods or other extras you are totally free to configurate those graphs. See <a href="http://www.umlgraph.org/doc/cd-opt.html">Class Diagram Options</a>. Just add them to the <br /><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span></pre>tag in pom.xml 
    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/03/24/automated-class-diagrams-using-maven.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/16/8-things-you-should-not-be-afraid-of-as.html">
        8 Things you should not be afraid of as a Developer
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">16 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <h3>Change</h3>In Software Development there is no such thing as stagnancy. Everything you develop now is just another version of a component that will probably change in the future. Change is the most common thing in Software Development, and you're better of accepting it as a fact. Expect future changes to everything you develop, and therefor design your Code more modular. This makes changes more easy and increases the Quality at the same time. Adapt the concepts of <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> and <a href="http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it">YAGNI</a>. You will often come to the Situation, where you look at your Code and imagine that you could have done that "better". Don't let this thought prevent you from sleeping. Take action immediately and <a href="http://en.wikipedia.org/wiki/Code_refactoring">Refactor</a>! If you don't do it now, you will probably never do it. The longer you wait, the harder and more costly it gets. And you slowly grow up a mess you cant deal with anymore.<br /><blockquote class="tr_bq">"Good code is code that is easy to change. Code tends to change until it is no longer easy to change. All code becomes bad code." - Unknown</blockquote><h3>Removal of dead / commented out Code</h3>If you experience dead or commented out code that is not required anymore, but you dont want to delete it because you dont know if you'll still need it in the future - DELETE IT RIGHT NOW!! Its your versioning tools's job to remember that code, not the comment's!!!! I've seen too much software filled with tons of commented out Code that no one can even remember any more. And then if you cant remember, you are easily even more afraid to delete it. Well, just delete it - now - for real.<br /><blockquote class="tr_bq">"Perfection is achieved, not when there is nothing more to add, but when there is nothing left to take away." - Antoine de Saint-Exupery</blockquote><h3>Making Mistakes</h3>Nobody is perfect and everyone makes mistakes. Making mistakes is a process of learning. There is no improvement if you don't make or recognize any mistakes. So: Everytime you make a mistake, you learn something new greatly improving your knowledge. The more mistakes you make and recognize the better you get. Also, there is no point in hiding your mistakes or feeling ashamed for them. Being honest and frankly about your mistakes makes you a great character and a reliable colleague. Therefor criticism, in a constructive way, is an important tool for successful teams.<br /><blockquote class="tr_bq">"Anyone who has never made a mistake has never tried anything new." - Albert Einstein</blockquote><h3>Showing your code to others</h3>Are you afraid of other people reviewing your code? Why is that? Did you not write as good as you could have? Well, then its probably not an adequate job for you. Are you afraid that you have made any mistakes? Well you shouldn't - because you could benefit of every mistake that you have made that is found in the review - see "Making Mistakes". You should always write your code as thoughtful as you can. Therefor you should rather be proud of what you have written, and not be afraid of others having a look at it.<br /><br /><h3>Failure</h3>And this is one of the most important. If you come to a point where you dont see any solution for your problem: Never give up hope. Take it as a challenge. Try to see things from another angle or explain to other people. Maybe you are just stuck in the wrong perspective. Successfully solving this ridiculous puzzle will make you an even stronger Developer.<br /><blockquote class="tr_bq">"I have not failed. I've just found 10,000 ways that won't work." - Thomas A. Edison</blockquote><h3>Your own codes stability</h3>Everyone knows this situation. You come to present your project to your boss or the customer, and you start worrying: "Will it work this time!? Hopefully i havent overlooked anything in the process of development!". This is a bad sign, and you shouldn't have to worry. You should rather have tested your project deliberately earlier. Of course, You can never make&nbsp; 100% sure that it works perfectly. But you can greatly improve the trust in your code by writing automated tests. It makes you feel more comfortable adapting changes and showcasing your software.<br /><br /><h3>New &amp; Complex Technology</h3>Developers are lazy and often sit on their "good ol" technology way too hard. IT is improving incredibly fast, new and better technology is born every day. Be open minded, read blogs and stay up to date. If a technology/framework seems to exactly fit your needs, give it a try. Also show it to your colleagues an spread the word. <a href="http://www.datamation.com/data-center/when-developers-are-afraid-to-try-something-new-1.html">This</a> is a great story about developers being afraid to try something new.<br /><br /><h3>Fighting Time Pressure</h3>Do not ever let time pressure ruin the Quality of your Project. It is your Job to keep your Code clean and stable. Quality requires deliberate decision making and takes time. And sometimes you need to fight for it. Your customer expects a 100%, maybe even 120%, complete Product that is maintainable and state-of-the-art. If you let the quality down and deliver a poor Result, you will end up in even more changerequests, maintenance effort and distrust. The time you saved earlier will be eaten up by the technical debt that you allowed. Also if you allow a single leak, the inhibition of allowing many more significantly drops. Be honest with your boss and show some backbone when it comes to Quality.<br /><blockquote class="tr_bq">"Programming is like sex: one mistake and you’re providing support for a lifetime." - Michael Sinz</blockquote>
    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/03/16/8-things-you-should-not-be-afraid-of-as.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/09/wanna-cache-proxy.html">
        Wanna Cache? Proxy!
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">09 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <div style="background-color: #DDDDDD; padding: 20px;">
⚠️ The following post confuses the Decorator Pattern with the Proxy Pattern.
While the structures of those Patterns are the same, they aim for different goals.
The Decorator adds functionality to the underlying object, whereas a Proxy controls access to it.
Therefor the usage of a cache is rather a Proxy than a Decorator.
</div>

<h2>The Decorator Pattern</h2>Class Diagram: <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-5tWIyDICVvM/UTtSn3qThiI/AAAAAAAAAAg/AYI4tvgmpyA/s1600/decorator_pattern.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-5tWIyDICVvM/UTtSn3qThiI/AAAAAAAAAAg/AYI4tvgmpyA/s1600/decorator_pattern.png" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br />Decorator Pattern is one of the most powerful Design Patterns, and its important to understand why. It allows you to add functionality to a Class without changing it. You use delegation instead of inheritance by just wrapping the existing Class in a "Suite" of your choice while the Interface stays the same. This way, you can even wrap a Class into multiple layers of Decorators where every Layer has its own and different purpose, and the Original Class even stays the same. Other than that the Layers are completely interchangeable and removable, because they all have the same Interface.<br />You can use your naked Object in the same manner as a decorated one with multiple Layers, and the rest of the Application wont even notice. Other components dont need to know whether a Class is decorated or not, because the only thing they care about is the Interface. The following Graphic should clear things up:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-gQHsPM_WUD0/UTtTP8ndLhI/AAAAAAAAAAo/33AtWE7cvNM/s1600/cache_decorator_steps.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-gQHsPM_WUD0/UTtTP8ndLhI/AAAAAAAAAAo/33AtWE7cvNM/s1600/cache_decorator_steps.png" /></a></div>Just follow the Steps:<br />In the first example there is no Decorator. So SomeClass directly speaks to BookService<br />In the second example there is a single Decorator. Therefore the following steps apply<br /><ol><li>SomeClass calls SomeDecoratorA.</li><li>SomeDecoratorA delegates the call to the real BookService. The Decorator could even manipulate the call in this step.</li><li>BookService returns a result. SomeDecoratorA now holds the result, and may manipulate it.</li><li>Finally, SomeDecoratorA hands the result over to the original caller SomeClass.</li></ol>In the third example, there are even 2 Nested Decorators. Since every Decorator speaks the Interface of the BookService Class you can wrap an infinite amount of Decorators upon.<br /><br /><h3>Usage Examples</h3>Most examples in Books and online Guides describe the Decorator Pattern used by some Graphic related stuff. You would have a normal line, and a line decorated with a shadow. Another example would be a Window in a GUI where you vary Decorators that add different kinds of styles (e.g. different Colors).<br /><br />But its important to understand, that Decorators are not intended to just make Styling more dynamic. It is just one way to use them. Instead, there are many more great use cases for Decorators and i will show you an example applying cache functionality.<br /><br /><h3>Applying Cache with Decorator Pattern</h3>Class Diagram:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-QeqCL_o0nQo/UTtV93LNgLI/AAAAAAAAAAw/SAP7zX3arnE/s1600/decorator_cache.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-QeqCL_o0nQo/UTtV93LNgLI/AAAAAAAAAAw/SAP7zX3arnE/s1600/decorator_cache.png" /></a></div><br />As you can see i am adding a BookServiceCacheDecorator that holds a Cache Component which temporarily stores a List of Books. The BookServiceCacheDecorator in the first place asks the Cache if there is a result available. If thats true, the decorator will use the cached result. Otherwise it will fetch the Result of the BookService itself, and store the Result in the Cache for later use.<br /><br />I start with the BookService Interface,<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">interface</span> <span style="color: #b00060; font-weight: bold;">BookService</span> <span style="color: #303030;">{</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">();</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />and its prime implementation.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceImpl</span> <span style="color: green; font-weight: bold;">implements</span> BookService <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Override</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />        System<span style="color: #303030;">.</span><span style="color: #0000c0;">out</span><span style="color: #303030;">.</span><span style="color: #0000c0;">println</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"load new data"</span><span style="color: #303030;">);</span><br />        List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> ArrayList<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;();</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookA"</span><span style="color: #303030;">));</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookB"</span><span style="color: #303030;">));</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookC"</span><span style="color: #303030;">));</span><br />        <span style="color: green; font-weight: bold;">return</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Here is the Code of the Cache Class. In this example it's caching forever, but thats alright.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Cache</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> storage<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">save</span><span style="color: #303030;">(</span>List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books<span style="color: #303030;">){</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">storage</span> <span style="color: #303030;">=</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">boolean</span> <span style="color: #0060b0; font-weight: bold;">hasResult</span><span style="color: #303030;">(){</span><br />        <span style="color: green; font-weight: bold;">if</span><span style="color: #303030;">(</span>storage <span style="color: #303030;">!=</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">){</span><br />            <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">true</span><span style="color: #303030;">;</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">false</span><span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> load<span style="color: #303030;">(){</span><br />        System<span style="color: #303030;">.</span><span style="color: #0000c0;">out</span><span style="color: #303030;">.</span><span style="color: #0000c0;">println</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"load from cache"</span><span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">return</span> storage<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Now lets continue with the Decorator Base Class. It has a preemtive Constructor to hand over the decorated Object.<br /><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">abstract</span> <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceDecorator</span> <span style="color: green; font-weight: bold;">implements</span> BookService<span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">protected</span> BookService decorated<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">){</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">decorated</span> <span style="color: #303030;">=</span> decorated<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />And finally the CacheDecorator. It Checks the Cache before calling BookServiceImpl.<br /><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceCacheDecorator</span> <span style="color: green; font-weight: bold;">extends</span> BookServiceDecorator <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Cache cache<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceCacheDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">super</span><span style="color: #303030;">(</span>decorated<span style="color: #303030;">);</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceCacheDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">,</span> Cache cache<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">super</span><span style="color: #303030;">(</span>decorated<span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">cache</span> <span style="color: #303030;">=</span> cache<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Override</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">if</span><span style="color: #303030;">(</span>cache<span style="color: #303030;">.</span><span style="color: #0000c0;">hasResult</span><span style="color: #303030;">()){</span><br />            <span style="color: green; font-weight: bold;">return</span> cache<span style="color: #303030;">.</span><span style="color: #0000c0;">load</span><span style="color: #303030;">();</span><br />        <span style="color: #303030;">}</span><br />        List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books <span style="color: #303030;">=</span> decorated<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span><br />        cache<span style="color: #303030;">.</span><span style="color: #0000c0;">save</span><span style="color: #303030;">(</span>books<span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">return</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Now two different use cases. One without Decorator, and one with the Cache Decorator:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9</pre></td><td><pre style="line-height: 125%; margin: 0;">BookService bookService <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> BookServiceImpl<span style="color: #303030;">();</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br /><br />BookService cachedBookService <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> BookServiceCacheDecorator<span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> BookServiceImpl<span style="color: #303030;">(),</span> <span style="color: green; font-weight: bold;">new</span> Cache<span style="color: #303030;">());</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load from cache</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load from cache</span><br /></pre></td></tr></tbody></table></div><br />Thats basically it. Just read the Code carefully. The final use cases should make clear how the Decorator applies functionality. Decorator pattern really helps you create a very modular Code in many circumstances. You should not be afraid of the additional Classes the Pattern depends on, since they are really not a big deal. The modularity gained easily outweighs them.

    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/03/09/wanna-cache-proxy.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/06/use-builder-pattern-to-avoid-methods.html">
        Avoid too many Parameters using the Builder Pattern
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">06 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Today i want to show you another way to use the <a href="http://en.wikipedia.org/wiki/Builder_pattern">Builder Pattern</a>. From what i<cite><b>'</b></cite>ve seen there are tons of examples of the Builder Pattern online. But they do all have one thing in common: They are used to create an Instance of an Object and "replace" its constructor. This way you can create a complex Object in a very clean and readable fashion using a <a href="http://en.wikipedia.org/wiki/Fluent_interface">Fluent Interface</a>.<br /><br />Other than that, there is also a slightly different way you can benefit of the Builder Pattern. Think of a Method with like 10 Parameters. Thats not quite nice, and should not ever happen. Robert C. Martin recommends a maximum amount of 3 Parameters in his book: <a href="http://www.amazon.com/dp/0132350882/?tag=stackoverfl08-20">Clean Code</a>. You should rather use some kind of a Config Object holding those 10 parameters, to clean it up. But lets say, you have a BookService Class with a find(..) method, that allows to search by 10 different parameters, and every single one of them is optional. You could use the Builder Pattern with some kind of <a href="http://www.martinfowler.com/eaaCatalog/queryObject.html">Query Object</a> to solve the problem.<br /><br />As we should always program against Interfaces to keep things modular, ill start with the Interface:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">interface</span> <span style="color: #b00060; font-weight: bold;">BookService</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> Book <span style="color: #0060b0; font-weight: bold;">create</span><span style="color: #303030;">(</span>Book book<span style="color: #303030;">);</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">delete</span><span style="color: #303030;">(</span>String isbn<span style="color: #303030;">);</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">query</span><span style="color: #303030;">();</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">interface</span> <span style="color: #b00060; font-weight: bold;">Query</span> <span style="color: #303030;">{</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">isName</span><span style="color: #303030;">(</span>String name<span style="color: #303030;">);</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">hasAuthor</span><span style="color: #303030;">(</span>String author<span style="color: #303030;">);</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">isCheaperThan</span><span style="color: #303030;">(</span>Float price<span style="color: #303030;">);</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">isIsbn</span><span style="color: #303030;">(</span>String isbn<span style="color: #303030;">);</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">hasMorePagesThan</span><span style="color: #303030;">(</span>Long pages<span style="color: #303030;">);</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">isAvailable</span><span style="color: #303030;">();</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> find<span style="color: #303030;">();</span><br /><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />So the Interface looks pretty neat. It allows you to write something like: <br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">query</span><span style="color: #303030;">().</span><span style="color: #0000c0;">hasAuthor</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"Bob"</span><span style="color: #303030;">).</span><span style="color: #0000c0;">isCheaperThan</span><span style="color: #303030;">(</span><span style="color: #6000e0; font-weight: bold;">20.9</span><span style="color: #303030;">).</span><span style="color: #0000c0;">isAvailable</span><span style="color: #303030;">().</span><span style="color: #0000c0;">find</span><span style="color: #303030;">();</span><br /></pre></div><br />While the Query could be considered as an implementation of the <a href="http://www.martinfowler.com/eaaCatalog/queryObject.html">Query Object pattern</a> it is not tied to any Database related stuff, which is very important. You dont want to be tied to Criteria Queries or SQL in this Layer. It should be independent of any implementation (e.g. Database or Filesystem).<br /><br />To clear things up, i want to show you an implementation example using <a href="http://www.springsource.org/spring-data">Spring-Data</a>. I am a big fan of Spring-Data, since it allows you to create full featured DAOs with little to no Programming effort for many different Persistence Providers. If you havent used it yet, you should definitely give it a try. <br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceImpl</span> <span style="color: green; font-weight: bold;">implements</span> BookService <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Autowired</span><br />    <span style="color: green; font-weight: bold;">private</span> BookRepository bookRepository<span style="color: #303030;">;</span><br /><br />    <span style="color: grey;">// ...</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Override</span><br />    <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">query</span><span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">new</span> <span style="color: #0060b0; font-weight: bold;">QueryImpl</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">bookRepository</span><span style="color: #303030;">);</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">QueryImpl</span> <span style="color: green; font-weight: bold;">implements</span> Query<span style="color: #303030;">{</span><br /><br />        <span style="color: green; font-weight: bold;">private</span> BookRepository bookRepository<span style="color: #303030;">;</span><br />        <span style="color: green; font-weight: bold;">private</span> Specifications<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> filters <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">;</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">QueryImpl</span><span style="color: #303030;">(</span>BookRepository bookRepository<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />            <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">bookRepository</span> <span style="color: #303030;">=</span> bookRepository<span style="color: #303030;">;</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">addFilter</span><span style="color: #303030;">(</span>Specification<span style="color: #303030;">&lt;</span>FlowMessage<span style="color: #303030;">&gt;</span> filter<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />            filters <span style="color: #303030;">=</span> <span style="color: #303030;">(</span>filters <span style="color: #303030;">==</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">)</span> <span style="color: #303030;">?</span> where<span style="color: #303030;">(</span>filter<span style="color: #303030;">)</span> <span style="color: #303030;">:</span> filters<span style="color: #303030;">.</span><span style="color: #0000c0;">and</span><span style="color: #303030;">(</span>filter<span style="color: #303030;">);</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">isName</span><span style="color: #303030;">(</span>String name<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />            <span style="color: green; font-weight: bold;">if</span> <span style="color: #303030;">(</span>name <span style="color: #303030;">==</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">)</span> <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">;</span><br />            addFilter<span style="color: #303030;">(</span>BookSpecifications<span style="color: #303030;">.</span><span style="color: #0000c0;">isName</span><span style="color: #303030;">(</span>name<span style="color: #303030;">));</span><br />            <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">;</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> Query <span style="color: #0060b0; font-weight: bold;">hasAuthor</span><span style="color: #303030;">(</span>String author<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />            <span style="color: green; font-weight: bold;">if</span> <span style="color: #303030;">(</span>author <span style="color: #303030;">==</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">)</span> <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">;</span><br />            addFilter<span style="color: #303030;">(</span>BookSpecifications<span style="color: #303030;">.</span><span style="color: #0000c0;">hasAuthor</span><span style="color: #303030;">(</span>author<span style="color: #303030;">));</span><br />            <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">;</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: grey;">// other criterias ...</span><br /><br />        <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> find<span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />            <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">bookRepository</span><span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">(</span>filters<span style="color: #303030;">);</span><br />        <span style="color: #303030;">}</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />As you can see i am just joining filter <a href="http://www.objectdb.com/java/jpa/query/criteria">Criterias</a> together, and thats it. The implementation is really simple but also expandable. These filter Criterias are supported by my BookRepository (=<a href="http://de.wikipedia.org/wiki/Data_Access_Object">DAO</a>). I just have to define them in a helper class first. Check out <a href="http://blog.springsource.org/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/">this</a> and <a href="http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-four-jpa-criteria-queries/">that</a> for a deeper understanding how to combine spring-data with criteria queries.<br /><br /><br /><br /><br />

    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/03/06/use-builder-pattern-to-avoid-methods.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/02/selenium-test-automation-with-maven.html">
        Selenium Test Automation with Maven
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">02 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Today i want to help you manage your Automated GUI Tests (Selenium) better. In the past i have seen many different ways people handle this. Some people just write those plain HTML TestCases with Selenium-IDE, store it somewhere on the HDD and run manually when needed. Others dont even use Selenium-IDE. They write pure Java for Example, and automate their execution with JUnit. My todays solution lies inbetween.<br /><br /><h3>Precondition</h3><ul><li>I want plain HTML TestCases, created with Selenium-IDE. So that someone with little Programming skills can still create them.</li><li>I want these GUI Tests to be run automatically in my Build process, so my CI-Tool can notify me on errors.</li><li>I also want all TestCases under Versioncontrol in my Projects Repository since the Tests grow with the Source.</li><li>I want the most little effort with the highest outcome. So i dont want to export JUnit Tests out of my HTML TestCases since it would be kind of a Duplication - and i want to stick to the DRY Principle.</li></ul><h3>Solution</h3>First of all i create a Folder in my Project for the Selenium-Tests.<br /><br /><b>Folder Structure </b><br /><ol><li>        <label for="src">src</label>        <input checked="checked" id="src" type="checkbox" />        <ol><li>                <label for="main">main</label>                <input id="main" type="checkbox" />            </li><li>                <label for="test">test</label>                <input checked="checked" id="test" type="checkbox" />                <ol><li><label for="java">java</label>                        <input checked="checked" id="java" type="checkbox" />                    </li><li>                        <label for="selenium">selenium</label>                        <input checked="checked" id="selenium" type="checkbox" />                        <ol><li class="file">TestSuite</li><li class="file">SomeTest1</li><li class="file">SomeTest2</li></ol></li></ol></li></ol></li><li class="file">pom.xml</li></ol><h3>Example TestSuite</h3><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #507090;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br /><span style="color: #507090;">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span><br /><span style="color: #007000;">&lt;html</span> <span style="color: #0000c0;">xmlns=</span><span style="background-color: #fff0f0;">"http://www.w3.org/1999/xhtml"</span> <span style="color: #0000c0;">xml:lang=</span><span style="background-color: #fff0f0;">"en"</span> <span style="color: #0000c0;">lang=</span><span style="background-color: #fff0f0;">"en"</span><span style="color: #007000;">&gt;</span><br /><span style="color: #007000;">&lt;head&gt;</span><br />    <span style="color: #007000;">&lt;meta</span> <span style="color: #0000c0;">content=</span><span style="background-color: #fff0f0;">"text/html; charset=UTF-8"</span> <span style="color: #0000c0;">http-equiv=</span><span style="background-color: #fff0f0;">"content-type"</span><span style="color: #007000;">/&gt;</span><br />    <span style="color: #007000;">&lt;title&gt;</span>Test Suite<span style="color: #007000;">&lt;/title&gt;</span><br /><span style="color: #007000;">&lt;/head&gt;</span><br /><span style="color: #007000;">&lt;body&gt;</span><br /><span style="color: #007000;">&lt;table</span> <span style="color: #0000c0;">id=</span><span style="background-color: #fff0f0;">"suiteTable"</span> <span style="color: #0000c0;">cellpadding=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">cellspacing=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">border=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">class=</span><span style="background-color: #fff0f0;">"selenium"</span><span style="color: #007000;">&gt;</span><br />    <span style="color: #007000;">&lt;tbody&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;b&gt;</span>Test Suite<span style="color: #007000;">&lt;/b&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;a</span> <span style="color: #0000c0;">href=</span><span style="background-color: #fff0f0;">"./SomeTest1.html"</span><span style="color: #007000;">&gt;</span>SomeTest1<span style="color: #007000;">&lt;/a&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;a</span> <span style="color: #0000c0;">href=</span><span style="background-color: #fff0f0;">"./SomeTest2.html"</span><span style="color: #007000;">&gt;</span>SomeTest2<span style="color: #007000;">&lt;/a&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;/tbody&gt;</span><br /><span style="color: #007000;">&lt;/table&gt;</span><br /><span style="color: #007000;">&lt;/body&gt;</span><br /><span style="color: #007000;">&lt;/html&gt;</span><br /></pre></td></tr></tbody></table></div><h3>&nbsp;</h3><h3>Example Test</h3><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #507090;">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br /><span style="color: #507090;">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span><br /><span style="color: #007000;">&lt;html</span> <span style="color: #0000c0;">xmlns=</span><span style="background-color: #fff0f0;">"http://www.w3.org/1999/xhtml"</span> <span style="color: #0000c0;">xml:lang=</span><span style="background-color: #fff0f0;">"en"</span> <span style="color: #0000c0;">lang=</span><span style="background-color: #fff0f0;">"en"</span><span style="color: #007000;">&gt;</span><br /><span style="color: #007000;">&lt;head</span> <span style="color: #0000c0;">profile=</span><span style="background-color: #fff0f0;">"http://selenium-ide.openqa.org/profiles/test-case"</span><span style="color: #007000;">&gt;</span><br />    <span style="color: #007000;">&lt;meta</span> <span style="color: #0000c0;">http-equiv=</span><span style="background-color: #fff0f0;">"Content-Type"</span> <span style="color: #0000c0;">content=</span><span style="background-color: #fff0f0;">"text/html; charset=UTF-8"</span><span style="color: #007000;">/&gt;</span><br />    <span style="color: #007000;">&lt;link</span> <span style="color: #0000c0;">rel=</span><span style="background-color: #fff0f0;">"selenium.base"</span> <span style="color: #0000c0;">href=</span><span style="background-color: #fff0f0;">""</span><span style="color: #007000;">/&gt;</span><br />    <span style="color: #007000;">&lt;title&gt;</span>SomeTest1.html<span style="color: #007000;">&lt;/title&gt;</span><br /><span style="color: #007000;">&lt;/head&gt;</span><br /><span style="color: #007000;">&lt;body&gt;</span><br /><span style="color: #007000;">&lt;table</span> <span style="color: #0000c0;">cellpadding=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">cellspacing=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">border=</span><span style="background-color: #fff0f0;">"1"</span><span style="color: #007000;">&gt;</span><br />    <span style="color: #007000;">&lt;thead&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td</span> <span style="color: #0000c0;">rowspan=</span><span style="background-color: #fff0f0;">"1"</span> <span style="color: #0000c0;">colspan=</span><span style="background-color: #fff0f0;">"3"</span><span style="color: #007000;">&gt;</span>SomeTest1<span style="color: #007000;">&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;/thead&gt;</span><br />    <span style="color: #007000;">&lt;tbody&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>open<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>/<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>waitForElementPresent<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>//div[@id='someId']<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>click<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>css=button.create<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: grey;">&lt;!-- Some Steps --&gt;</span><br />    <span style="color: #007000;">&lt;tr&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>assertText<span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span><br />            //div[@id='someId']<br />        <span style="color: #007000;">&lt;/td&gt;</span><br />        <span style="color: #007000;">&lt;td&gt;</span>${expectedText}<span style="color: #007000;">&lt;/td&gt;</span><br />    <span style="color: #007000;">&lt;/tr&gt;</span><br />    <span style="color: #007000;">&lt;/tbody&gt;</span><br /><span style="color: #007000;">&lt;/table&gt;</span><br /><span style="color: #007000;">&lt;/body&gt;</span><br /><span style="color: #007000;">&lt;/html&gt;</span><br /></pre></td></tr></tbody></table></div><h3>&nbsp;</h3><h3>Setup WebServer</h3>So i have my TestSuite in place. But how do i run them? Most importantly, it should run within the Maven Build Process, so it will also run on Jenkins-CI or whatever. As we are testing against a real running WebApp this is an End-to-End-Test per definition. In Maven we have the opportunity to run such Tests within the <i>integration-test</i> Phase. If you want to learn more about the Maven Build Life-cycle and its phases check out <a href="http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">this</a>. So we need some kind of WebServer to run our WebApp, otherwise the tests wont work. The WebServer should be started before the <i>integration-test</i> phase, and be stopped afterwards. We could Use <a href="http://tomcat.apache.org/maven-plugin.html">Tomcat7</a> or <a href="http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin">Jetty</a> for example. In this example i will use the tomcat7-maven-plugin. I configure my pom.xml to start Tomcat7 <i>pre-integration-test</i>.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.maven<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat7-maven-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>2.0<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;id&gt;</span>tomcat-run<span style="color: #007000;">&lt;/id&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>run-war-only<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>pre-integration-test<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;configuration&gt;</span><br />                <span style="color: #007000;">&lt;port&gt;</span>8080<span style="color: #007000;">&lt;/port&gt;</span><br />                <span style="color: #007000;">&lt;fork&gt;</span>true<span style="color: #007000;">&lt;/fork&gt;</span><br />            <span style="color: #007000;">&lt;/configuration&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;id&gt;</span>tomcat-shutdown<span style="color: #007000;">&lt;/id&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>shutdown<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>post-integration-test<span style="color: #007000;">&lt;/phase&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />If you are running multiple Projects on a CI-Server you might consider using a different Port-Number for each Project.<br /><br /><h3>Finally: Run the Tests </h3>Last but not least we need to run the tests. Luckily there is this <a href="http://selenium-maven-plugin/">selenium-maven-plugin</a> available that does the job.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.codehaus.mojo<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>selenium-maven-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>2.3<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;configuration&gt;</span><br />        <span style="color: #007000;">&lt;browser&gt;</span>*firefox<span style="color: #007000;">&lt;/browser&gt;</span><br />        <span style="color: #007000;">&lt;suite&gt;</span>src/test/selenium/TestSuite.html<span style="color: #007000;">&lt;/suite&gt;</span><br />        <span style="color: #007000;">&lt;startURL&gt;</span>http://localhost:8080<span style="color: #007000;">&lt;/startURL&gt;</span><br />    <span style="color: #007000;">&lt;/configuration&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;id&gt;</span>run-selenium-tests<span style="color: #007000;">&lt;/id&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>integration-test<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>selenese<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />Now,&nbsp; whenever we execute <u>mvn clean verify</u> or even <u>mvn clean install</u> in console, the Tests are run and reports are stored within the target directory. This will also be done by your CI-Tool.<br /><br /><h3>Conclusion</h3>We do have a complete and clean Setup.<br /><ul><li>We have a place to store our Tests,&nbsp;&nbsp; </li><li>They are within the Sourcecode and Version control</li><li>They can be run automatically by CI-Tools</li><li>Even Non-developers can add new TestCases</li></ul>Btw: Dont give up if something is not working as intended. Selenium seems a little buggy, and some times you have to dig a little to solve problems. But it really works, i figured it out.<br />I hope you enjoyed this Guide. Greetings.<br /><br />
    

    
      
      
      

      
    

    <p><br class="clear" /><a class="comments_link" href="/2013/03/02/selenium-test-automation-with-maven.html#comments">to the comments</a></p>
  </article>
  
  

  

</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
