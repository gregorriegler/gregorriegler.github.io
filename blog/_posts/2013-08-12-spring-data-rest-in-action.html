---
layout: post
title: spring-data-rest in Action
date: '2013-08-12T09:46:00.001+02:00'
author: Gregor
tags:
- Java
- REST
- JPA
- Web Services
- Spring
modified_time: '2013-08-15T18:13:53.866+02:00'
thumbnail: http://2.bp.blogspot.com/-pVhAVTCk70E/UgU6z_a3W8I/AAAAAAAAAGA/oIlaK7wRGCA/s72-c/bookapi_model.png
blogger_id: tag:blogger.com,1999:blog-1178805312154210159.post-7719503148929138154
blogger_orig_url: http://www.beabetterdeveloper.com/2013/08/spring-data-rest-in-action.html
---

<h3></h3><h3>What is spring-data-rest?</h3><h3></h3><a href="http://www.springsource.org/spring-data/rest">spring-data-rest</a>, a recent addition to the <a href="http://www.springsource.org/spring-data">spring-data</a> project, is a framework that helps you expose your entities directly as RESTful webservice endpoints. Unlike rails, grails or roo it does not generate any code achieving this goal. spring data-rest supports JPA, MongoDB, JSR-303 validation, <a href="http://stateless.co/hal_specification.html">HAL</a> and many more. It is really innovative and lets you setup your RESTful webservice within minutes. In this example i'll give you a short overview of what spring-data-rest is capable of.<br /><br /><h3>Initial Configuration&nbsp;</h3>I'm gonna use the new Servlet 3 Java Web Configuration instead of an ancient web.xml. Nothing really special here.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">WebAppInitializer</span> <span style="color: #008800; font-weight: bold;">extends</span> AbstractAnnotationConfigDispatcherServletInitializer <span style="color: #333333;">{</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> Class<span style="color: #333333;">&lt;?&gt;[]</span> getRootConfigClasses<span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="color: #008800; font-weight: bold;">new</span> Class<span style="color: #333333;">&lt;?&gt;[]{</span>AppConfiguration<span style="color: #333333;">.</span><span style="color: #0000cc;">class</span><span style="color: #333333;">};</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> Class<span style="color: #333333;">&lt;?&gt;[]</span> getServletConfigClasses<span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="color: #008800; font-weight: bold;">new</span> Class<span style="color: #333333;">[]{</span>WebConfiguration<span style="color: #333333;">.</span><span style="color: #0000cc;">class</span><span style="color: #333333;">};</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> String<span style="color: #333333;">[]</span> <span style="color: #0066bb; font-weight: bold;">getServletMappings</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="color: #008800; font-weight: bold;">new</span> String<span style="color: #333333;">[]{</span><span style="background-color: #fff0f0;">"/"</span><span style="color: #333333;">};</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/WebAppInitializer.java">WebAppInitializer.java on github</a><br /><br />I am initializing hibernate as my database abstraction layer in the <i>AppConfiguration</i> class. I'm using an embedded database (<a href="http://hsqldb.org/">hsql</a>), since i want to keep this showcase simple stupid. Still, nothing special here.<br /><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Configuration</span><br /><span style="color: #555555; font-weight: bold;">@EnableJpaRepositories</span><br /><span style="color: #555555; font-weight: bold;">@EnableTransactionManagement</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">AppConfiguration</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Bean</span><br />    <span style="color: #008800; font-weight: bold;">public</span> DataSource <span style="color: #0066bb; font-weight: bold;">dataSource</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        EmbeddedDatabaseBuilder builder <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> EmbeddedDatabaseBuilder<span style="color: #333333;">();</span><br />        <span style="color: #008800; font-weight: bold;">return</span> builder<span style="color: #333333;">.</span><span style="color: #0000cc;">setType</span><span style="color: #333333;">(</span>EmbeddedDatabaseType<span style="color: #333333;">.</span><span style="color: #0000cc;">HSQL</span><span style="color: #333333;">).</span><span style="color: #0000cc;">build</span><span style="color: #333333;">();</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Bean</span><br />    <span style="color: #008800; font-weight: bold;">public</span> LocalContainerEntityManagerFactoryBean <span style="color: #0066bb; font-weight: bold;">entityManagerFactory</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        HibernateJpaVendorAdapter vendorAdapter <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> HibernateJpaVendorAdapter<span style="color: #333333;">();</span><br />        vendorAdapter<span style="color: #333333;">.</span><span style="color: #0000cc;">setDatabase</span><span style="color: #333333;">(</span>Database<span style="color: #333333;">.</span><span style="color: #0000cc;">HSQL</span><span style="color: #333333;">);</span><br />        vendorAdapter<span style="color: #333333;">.</span><span style="color: #0000cc;">setGenerateDdl</span><span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">true</span><span style="color: #333333;">);</span><br /><br />        LocalContainerEntityManagerFactoryBean factory <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> LocalContainerEntityManagerFactoryBean<span style="color: #333333;">();</span><br />        factory<span style="color: #333333;">.</span><span style="color: #0000cc;">setJpaVendorAdapter</span><span style="color: #333333;">(</span>vendorAdapter<span style="color: #333333;">);</span><br />        factory<span style="color: #333333;">.</span><span style="color: #0000cc;">setPackagesToScan</span><span style="color: #333333;">(</span>getClass<span style="color: #333333;">().</span><span style="color: #0000cc;">getPackage</span><span style="color: #333333;">().</span><span style="color: #0000cc;">getName</span><span style="color: #333333;">());</span><br />        factory<span style="color: #333333;">.</span><span style="color: #0000cc;">setDataSource</span><span style="color: #333333;">(</span>dataSource<span style="color: #333333;">());</span><br /><br />        <span style="color: #008800; font-weight: bold;">return</span> factory<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Bean</span><br />    <span style="color: #008800; font-weight: bold;">public</span> PlatformTransactionManager <span style="color: #0066bb; font-weight: bold;">transactionManager</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="color: #008800; font-weight: bold;">new</span> <span style="color: #0066bb; font-weight: bold;">JpaTransactionManager</span><span style="color: #333333;">();</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/AppConfiguration.java">AppConfiguration.java on github</a><br /><br />Now to the application servlet configuration: <i>WebConfiguration</i><br /><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Configuration</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">WebConfiguration</span> <span style="color: #008800; font-weight: bold;">extends</span> RepositoryRestMvcConfiguration <span style="color: #333333;">{</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/WebConfiguration.java">WebConfiguration.java on github</a><br /><br />Oh, well thats a bit short isnt it? Not a single line of code required for a complete setup. This is a really nice application of the <a href="http://en.wikipedia.org/wiki/Convention_over_configuration">convention over configuration</a> paradigm. We can now start creating spring-data-jpa repositories and they will be exposed as RESTful resources automatically. And we can still add custom configuration to the <i>WebConfiguration</i> class later if needed.<br /><br />The Initialization was really short and easy. We didn't have to code anything special. The only thing we did was setting up a database connection and hibernate, which is obviously inevitable. Now, that we have setup our "REST Servlet" and persistence,  lets move on to the application itself, starting with the model.<br /><br /><h3>The Model</h3>I'll keep it really simple creating only two related entities. <br /><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-pVhAVTCk70E/UgU6z_a3W8I/AAAAAAAAAGA/oIlaK7wRGCA/s1600/bookapi_model.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-pVhAVTCk70E/UgU6z_a3W8I/AAAAAAAAAGA/oIlaK7wRGCA/s1600/bookapi_model.png" /></a></div><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Entity</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">Book</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Id</span><br />    <span style="color: #008800; font-weight: bold;">private</span> String isbn<span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String title<span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String language<span style="color: #333333;">;</span><br /><br />    <span style="color: #555555; font-weight: bold;">@ManyToMany</span><br />    <span style="color: #008800; font-weight: bold;">private</span> List<span style="color: #333333;">&lt;</span>Author<span style="color: #333333;">&gt;</span> authors<span style="color: #333333;">;</span><br /><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/model/Book.java">Book.java on github</a><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Entity</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">Author</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Id</span><br />    <span style="color: #555555; font-weight: bold;">@GeneratedValue</span><span style="color: #333333;">(</span>strategy <span style="color: #333333;">=</span> GenerationType<span style="color: #333333;">.</span><span style="color: #0000cc;">SEQUENCE</span><span style="color: #333333;">)</span><br />    <span style="color: #008800; font-weight: bold;">private</span> Integer id<span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String name<span style="color: #333333;">;</span><br /><br />    <span style="color: #555555; font-weight: bold;">@ManyToMany</span><span style="color: #333333;">(</span>mappedBy <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"authors"</span><span style="color: #333333;">)</span><br />    <span style="color: #008800; font-weight: bold;">private</span> List<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">&gt;</span> books<span style="color: #333333;">;</span><br /><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/model/Author.java">Author.java on github</a><br /><br />To finally make the entities persistent and exposed as a RESTful webservice, we need spring-data repositories. A repository is basically a <a href="http://en.wikipedia.org/wiki/Data_access_object">DAO</a>. It offers <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> functionality for our entities. spring-data takes away most of your programming effort creating such repositories. We just have to define an empty interface, spring-data does everything else out of the box. Still, it is easily customizable thanks to its design by convention over configuration!<br /><br /><h3>The Actual Repositories</h3><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@RestResource</span><span style="color: #333333;">(</span>path <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"books"</span><span style="color: #333333;">,</span> rel <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"books"</span><span style="color: #333333;">)</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">interface</span> <span style="color: #bb0066; font-weight: bold;">BookRepository</span> <span style="color: #008800; font-weight: bold;">extends</span> PagingAndSortingRepository<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">,</span> Long<span style="color: #333333;">&gt;</span> <span style="color: #333333;">{</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/BookRepository.java">BookRepository.java on github</a><br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@RestResource</span><span style="color: #333333;">(</span>path <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"authors"</span><span style="color: #333333;">,</span> rel <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"authors"</span><span style="color: #333333;">)</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">interface</span> <span style="color: #bb0066; font-weight: bold;">AuthorRepository</span> <span style="color: #008800; font-weight: bold;">extends</span> PagingAndSortingRepository<span style="color: #333333;">&lt;</span>Author<span style="color: #333333;">,</span> Integer<span style="color: #333333;">&gt;</span> <span style="color: #333333;">{</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/main/java/com/blogspot/babdev/bookapi/AuthorRepository.java">AuthorRepository.java on github</a><br /><br />Again, there is nearly no code needed. Even the <i>@RestResource</i> annotation could be left out. But if i did, the path and rel would be named after the entity, which i dont want. A REST resource that contains multiple children should be named plural though.<br /><br /><h3>Accessing The Result</h3>Our RESTful webservice is now ready for deployment. Once run, it lists all available resources on the root, so you can navigate from there.<br /><br /><b><i>GET http://localhost:8080/</i></b><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">{<br />  <span style="color: #007700;">"links"</span> : [ {<br />    <span style="color: #007700;">"rel"</span> : <span style="background-color: #fff0f0;">"books"</span>,<br />    <span style="color: #007700;">"href"</span> : <span style="background-color: #fff0f0;">"http://localhost:8080/books"</span><br />  }, {<br />    <span style="color: #007700;">"rel"</span> : <span style="background-color: #fff0f0;">"authors"</span>,<br />    <span style="color: #007700;">"href"</span> : <span style="background-color: #fff0f0;">"http://localhost:8080/authors"</span><br />  } ],<br />  <span style="color: #007700;">"content"</span> : [ ]<br />}<br /></pre></div><br />Fine! Now lets create an author and a book.<br /><br /><b><i>POST http://localhost:8080/authors</i></b><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">{<span style="color: #007700;">"name"</span>:<span style="background-color: #fff0f0;">"Uncle Bob"</span>}<br /></pre></div><br /><b>Response</b><br /><pre><span style="color: #666666;">201 Created</span><br /><span style="color: #666666;">Location: http://localhost:8080/authors/1</span><br /></pre><b><i>PUT http://localhost:8080/books/0132350882</i></b><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">{<br />  <span style="color: #007700;">"title"</span>: <span style="background-color: #fff0f0;">"Clean Code"</span>,<br />  <span style="color: #007700;">"authors"</span>: [<br />      {<br />          <span style="color: #007700;">"rel"</span>: <span style="background-color: #fff0f0;">"authors"</span>,<br />          <span style="color: #007700;">"href"</span>: <span style="background-color: #fff0f0;">"http://localhost:8080/authors/1"</span><br />      }<br />  ]<br />}<br /></pre></div><br /><b>Response</b><br /><pre><span style="color: #666666;">201 Created</span></pre>Noticed how i used PUT to create the book? This is because its id is the actual isbn. I have to tell the server which isbn to use since he cant guess it. I used POST for the author as his id is just an incremental number that is generated automatically. Also, i used a link to connect both, the book (<i>/books/0132350882</i>) and the author (<i>/authors/1</i>). This is basically what hypermedia is all about: Links are used for navigation and relations between entities.<br /><br />Now, lets see if the book was created accordingly.<br /><br /><b><i>GET http://localhost:8080/books</i></b><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;">{<br />  <span style="color: #007700;">"links"</span> : [ ],<br />  <span style="color: #007700;">"content"</span> : [ {<br />    <span style="color: #007700;">"links"</span> : [ {<br />      <span style="color: #007700;">"rel"</span> : <span style="background-color: #fff0f0;">"books.Book.authors"</span>,<br />      <span style="color: #007700;">"href"</span> : <span style="background-color: #fff0f0;">"http://localhost:8080/books/0132350882/authors"</span><br />    }, {<br />      <span style="color: #007700;">"rel"</span> : <span style="background-color: #fff0f0;">"self"</span>,<br />      <span style="color: #007700;">"href"</span> : <span style="background-color: #fff0f0;">"http://localhost:8080/books/0132350882"</span><br />    } ],<br />    <span style="color: #007700;">"title"</span> : <span style="background-color: #fff0f0;">"Clean Code"</span><br />  } ],<br />  <span style="color: #007700;">"page"</span> : {<br />    <span style="color: #007700;">"size"</span> : <span style="color: #0000dd; font-weight: bold;">20</span>,<br />    <span style="color: #007700;">"totalElements"</span> : <span style="color: #0000dd; font-weight: bold;">1</span>,<br />    <span style="color: #007700;">"totalPages"</span> : <span style="color: #0000dd; font-weight: bold;">1</span>,<br />    <span style="color: #007700;">"number"</span> : <span style="color: #0000dd; font-weight: bold;">1</span><br />  }<br />}<br /></pre></div><br />Fine!<br /><br />Here is an Integration Test, following these steps automatically. It is also available in the example on github.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">BookApiIT</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">final</span> RestTemplate restTemplate <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> RestTemplate<span style="color: #333333;">();</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">final</span> String authorsUrl <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"http://localhost:8080/authors"</span><span style="color: #333333;">;</span><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">final</span> String booksUrl <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"http://localhost:8080/books"</span><span style="color: #333333;">;</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Test</span><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">testCreateBookWithAuthor</span><span style="color: #333333;">()</span> <span style="color: #008800; font-weight: bold;">throws</span> Exception <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">final</span> URI authorUri <span style="color: #333333;">=</span> restTemplate<span style="color: #333333;">.</span><span style="color: #0000cc;">postForLocation</span><span style="color: #333333;">(</span>authorsUrl<span style="color: #333333;">,</span> sampleAuthor<span style="color: #333333;">());</span> <span style="color: #888888;">// create Author</span><br /><br />        <span style="color: #008800; font-weight: bold;">final</span> URI bookUri <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> URI<span style="color: #333333;">(</span>booksUrl <span style="color: #333333;">+</span> <span style="background-color: #fff0f0;">"/"</span> <span style="color: #333333;">+</span> sampleBookIsbn<span style="color: #333333;">);</span><br />        restTemplate<span style="color: #333333;">.</span><span style="color: #0000cc;">put</span><span style="color: #333333;">(</span>bookUri<span style="color: #333333;">,</span> sampleBook<span style="color: #333333;">(</span>authorUri<span style="color: #333333;">.</span><span style="color: #0000cc;">toString</span><span style="color: #333333;">()));</span> <span style="color: #888888;">// create Book linked to Author</span><br /><br />        Resource<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">&gt;</span> book <span style="color: #333333;">=</span> getBook<span style="color: #333333;">(</span>bookUri<span style="color: #333333;">);</span><br />        assertNotNull<span style="color: #333333;">(</span>book<span style="color: #333333;">);</span><br /><br />        <span style="color: #008800; font-weight: bold;">final</span> URI authorsOfBookUri <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> URI<span style="color: #333333;">(</span>book<span style="color: #333333;">.</span><span style="color: #0000cc;">getLink</span><span style="color: #333333;">(</span><span style="background-color: #fff0f0;">"books.Book.authors"</span><span style="color: #333333;">).</span><span style="color: #0000cc;">getHref</span><span style="color: #333333;">());</span><br />        Resource<span style="color: #333333;">&lt;</span>List<span style="color: #333333;">&lt;</span>Resource<span style="color: #333333;">&lt;</span>Author<span style="color: #333333;">&gt;&gt;&gt;</span> authors <span style="color: #333333;">=</span> getAuthors<span style="color: #333333;">(</span>authorsOfBookUri<span style="color: #333333;">);</span><br />        assertNotNull<span style="color: #333333;">(</span>authors<span style="color: #333333;">.</span><span style="color: #0000cc;">getContent</span><span style="color: #333333;">());</span><br />        assertFalse<span style="color: #333333;">(</span>authors<span style="color: #333333;">.</span><span style="color: #0000cc;">getContent</span><span style="color: #333333;">().</span><span style="color: #0000cc;">isEmpty</span><span style="color: #333333;">());</span> <span style="color: #888888;">// check if /books/0132350882/authors contains an author</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String <span style="color: #0066bb; font-weight: bold;">sampleAuthor</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="background-color: #fff0f0;">"{\"name\":\"Robert C. Martin\"}"</span><span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> <span style="color: #008800; font-weight: bold;">final</span> String sampleBookIsbn <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"0132350882"</span><span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String <span style="color: #0066bb; font-weight: bold;">sampleBook</span><span style="color: #333333;">(</span>String authorUrl<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="background-color: #fff0f0;">"{\"title\":\"Clean Code\",\"authors\":[{\"rel\":\"authors\",\"href\":\""</span> <span style="color: #333333;">+</span> authorUrl <span style="color: #333333;">+</span> <span style="background-color: #fff0f0;">"\"}]}"</span><span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> Resource<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">&gt;</span> <span style="color: #0066bb; font-weight: bold;">getBook</span><span style="color: #333333;">(</span>URI uri<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> restTemplate<span style="color: #333333;">.</span><span style="color: #0000cc;">exchange</span><span style="color: #333333;">(</span>uri<span style="color: #333333;">,</span> HttpMethod<span style="color: #333333;">.</span><span style="color: #0000cc;">GET</span><span style="color: #333333;">,</span> <span style="color: #008800; font-weight: bold;">null</span><span style="color: #333333;">,</span> <span style="color: #008800; font-weight: bold;">new</span> ParameterizedTypeReference<span style="color: #333333;">&lt;</span>Resource<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">&gt;&gt;()</span> <span style="color: #333333;">{</span><br />        <span style="color: #333333;">}).</span><span style="color: #0000cc;">getBody</span><span style="color: #333333;">();</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> Resource<span style="color: #333333;">&lt;</span>List<span style="color: #333333;">&lt;</span>Resource<span style="color: #333333;">&lt;</span>Author<span style="color: #333333;">&gt;&gt;&gt;</span> <span style="color: #0066bb; font-weight: bold;">getAuthors</span><span style="color: #333333;">(</span>URI uri<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> restTemplate<span style="color: #333333;">.</span><span style="color: #0000cc;">exchange</span><span style="color: #333333;">(</span>uri<span style="color: #333333;">,</span> HttpMethod<span style="color: #333333;">.</span><span style="color: #0000cc;">GET</span><span style="color: #333333;">,</span> <span style="color: #008800; font-weight: bold;">null</span><span style="color: #333333;">,</span> <span style="color: #008800; font-weight: bold;">new</span> ParameterizedTypeReference<span style="color: #333333;">&lt;</span>Resource<span style="color: #333333;">&lt;</span>List<span style="color: #333333;">&lt;</span>Resource<span style="color: #333333;">&lt;</span>Author<span style="color: #333333;">&gt;&gt;&gt;&gt;()</span> <span style="color: #333333;">{</span><br />        <span style="color: #333333;">}).</span><span style="color: #0000cc;">getBody</span><span style="color: #333333;">();</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><a href="https://github.com/gregorriegler/babdev-spring/blob/master/spring-data-rest/src/test/java/com/blogspot/babdev/bookapi/BookApiIT.java">BookApiIT.java on github </a><br /><br /><h3>Conclusion </h3>We have created a complete RESTful webservice without much coding effort. We just defined our entities and database connection. spring-data-rest stated that everything else is just boilerplate, and i agree.<br /><br />To consume the webservices manually, consider the <a href="https://github.com/SpringSource/rest-shell">rest-shell</a>. It is a command-shell making the navigation in your webservice as easy and fun as it could be. Here is a screenshot:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-_1qXu6WJuJs/UgVQbtGA-LI/AAAAAAAAAGQ/ZY5fQRJs0Xg/s1600/rest_shell.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-_1qXu6WJuJs/UgVQbtGA-LI/AAAAAAAAAGQ/ZY5fQRJs0Xg/s1600/rest_shell.png" /></a></div><br />The complete example is available on my github<br /><a href="https://github.com/gregorriegler/babdev-spring/tree/master/spring-data-rest">https://github.com/gregorriegler/babdev-spring/tree/master/spring-data-rest</a><br /><a href="https://github.com/gregorriegler/babdev-spring">https://github.com/gregorriegler/babdev-spring</a><br /><br /><br />