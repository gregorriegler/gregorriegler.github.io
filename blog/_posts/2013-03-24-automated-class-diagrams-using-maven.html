---
layout: post
title: Automatically generated Class Diagrams using Maven & UMLGraph
date: '2013-03-24T15:01:00.001+01:00'
author: Gregor
tags:
- Automation
- Java
- UML
- Class Diagram
- Maven
- UMLGraph
modified_time: '2013-08-03T21:01:24.971+02:00'
thumbnail: http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s72-c/umlgraph.png
blogger_id: tag:blogger.com,1999:blog-1178805312154210159.post-6796351190420111920
blogger_orig_url: http://www.beabetterdeveloper.com/2013/03/automated-class-diagrams-using-maven.html
---

Drawing Class Diagrams preemptive is sometimes nice to optimize your thought of design. But it will still most likely change in the development phase. Since your Class Diagram is part of your documentation it should be up to date all the time. There is no point in having a Class Diagram if the code does not fit it. You could keep adapting the changes to the Class Diagram by hand, but that can get very time-consuming and exhausting. You should rather automate that process, and there are several ways to achieve exactly that. You could for example search for a UML Class Diagram Tool supporting roundtrip engineering. There are some commercial, and even some free ones available. Not all of them work very well and it can be a frustrating task to figure out which way to go. You would probably try out some and throw them away because they are just not what you expected.<br />Thats why i want to show you a different approach: Letting a Javadoc Doclet draw the Class Diagrams in build phase and embed them into your javadoc automatically. UMLGraph is such a doclet. It analyzes your code, draws Class Diagrams automatically and embed them into your javadoc.<br /><br />Since maven can run javadoc at build phase it's perfect. You just have to configurate the maven-javadoc-plugin to use UMLGraph.<br /><br /><h3>Configurate Maven to use UMLGraph</h3><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;reporting&gt;</span>                                                                              <br />    <span style="color: #007000;">&lt;plugins&gt;</span>                                                                            <br />        <span style="color: #007000;">&lt;plugin&gt;</span>                                                                         <br />            <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #007000;">&lt;/groupId&gt;</span>                                  <br />            <span style="color: #007000;">&lt;artifactId&gt;</span>maven-javadoc-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span>                                <br />            <span style="color: #007000;">&lt;version&gt;</span>2.9<span style="color: #007000;">&lt;/version&gt;</span>                                                       <br />            <span style="color: #007000;">&lt;configuration&gt;</span>                                                              <br />                <span style="color: #007000;">&lt;doclet&gt;</span>org.umlgraph.doclet.UmlGraphDoc<span style="color: #007000;">&lt;/doclet&gt;</span>                         <br />                <span style="color: #007000;">&lt;docletArtifact&gt;</span>                                                         <br />                    <span style="color: #007000;">&lt;groupId&gt;</span>org.umlgraph<span style="color: #007000;">&lt;/groupId&gt;</span>                                      <br />                    <span style="color: #007000;">&lt;artifactId&gt;</span>umlgraph<span style="color: #007000;">&lt;/artifactId&gt;</span>                                    <br />                    <span style="color: #007000;">&lt;version&gt;</span>5.6<span style="color: #007000;">&lt;/version&gt;</span>                                               <br />                <span style="color: #007000;">&lt;/docletArtifact&gt;</span>                                                        <br />                <span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span>                           <br />                <span style="color: #007000;">&lt;useStandardDocletOptions&gt;</span>true<span style="color: #007000;">&lt;/useStandardDocletOptions&gt;</span>                <br />            <span style="color: #007000;">&lt;/configuration&gt;</span>                                                             <br />        <span style="color: #007000;">&lt;/plugin&gt;</span>                                                                        <br />    <span style="color: #007000;">&lt;/plugins&gt;</span>                                                                           <br /><span style="color: #007000;">&lt;/reporting&gt;</span>                                                                             <br /></pre></td></tr></tbody></table></div><br /><span style="color: red;">Beware that the javadoc doclet api has changed from jdk 1.6 to jdk 1.7 and most of the online tutorials are outdated because of that. UMLGraph adapted to jdk 1.7 since <a href="http://www.umlgraph.org/ver.html">version 5.5</a>.</span><br /><br />If we run <u>mvn site</u> right now, we will just get that error:<br /><b><span class="postbody"><a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: Cannot run program "dot": <a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: error=2, No such file or directory&nbsp;</span></b><br /><span class="postbody">This means that the program dot was not found which is a part of the graphviz library.</span><br /><span class="postbody">&nbsp;</span><b><span class="postbody"> </span></b><br /><h3>Install Graphviz</h3>For UMLGraph to run you need <a href="http://www.graphviz.org/">graphviz</a> installed. Go to the Download Page, and choose your package. On linux you could even <i><b>sudo aptget install graphviz</b></i>. Beware that you might have to reboot or relogin to use graphviz, because the Systems Path is extended during installation.<br /><br /><h3>First Result</h3>Run <u>mvn site</u>, and open target/site/apidocs/index.html afterwards.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" /></a></div><br />As you can see its drawing beautiful and accurate UML Class Diagrams.<br /><br /><h3>Custom Configuration</h3>If you dont want attributes/methods or other extras you are totally free to configurate those graphs. See <a href="http://www.umlgraph.org/doc/cd-opt.html">Class Diagram Options</a>. Just add them to the <br /><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span></pre>tag in pom.xml 