<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  <title>
    
      Gregor Riegler - page 3 &middot; Gregor Riegler
    
  </title>

  


  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css" />
  

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface" />

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.ico" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />

  <!-- Additional head bits without overriding original head -->
</head>


  <body class="default">

    <div id="sidebar">
  <header>
    <div class="site-title">
      <a href="/">
        
          <span class="back-arrow icon"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 0h24v24H0z" fill="none"/>
  <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
</svg></span>
        
        Gregor Riegler
      </a>
    </div>
    <p class="lead">merciless refactorer</p>
  </header>
  <nav id="sidebar-nav-links">
  

  


  

  
    
  

  
    
  

  
    
  

  

  
    
  

  

  

  
    
      <a class="page-link "
          href="/about">about</a>
    
  

  
    
      <a class="page-link "
          href="/blog">blog</a>
    
  

  
    
      <a class="page-link "
          href="/speaking">speaking</a>
    
  

  
    
      <a class="page-link "
          href="/refactoring-java/">refactoring java video series</a>
    
  



  

  

  


  

  
    
  

  
    
  

  
    
  

  

  
    
  

  

  

  
    
  

  
    
  

  
    
  

  
    
  


  <!-- Optional additional links to insert in sidebar nav -->
</nav>


  

  <nav id="sidebar-icon-links">

  
  <a id="twitter-link"
     class="icon" title="Twitter" aria-label="Twitter"
     href="http://www.twitter.com/gregor_riegler">
    <?xml version="1.0" ?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN'  'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="0 0 56.693 56.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M52.837,15.065c-1.811,0.805-3.76,1.348-5.805,1.591c2.088-1.25,3.689-3.23,4.444-5.592c-1.953,1.159-4.115,2-6.418,2.454  c-1.843-1.964-4.47-3.192-7.377-3.192c-5.581,0-10.106,4.525-10.106,10.107c0,0.791,0.089,1.562,0.262,2.303  c-8.4-0.422-15.848-4.445-20.833-10.56c-0.87,1.492-1.368,3.228-1.368,5.082c0,3.506,1.784,6.6,4.496,8.412  c-1.656-0.053-3.215-0.508-4.578-1.265c-0.001,0.042-0.001,0.085-0.001,0.128c0,4.896,3.484,8.98,8.108,9.91  c-0.848,0.23-1.741,0.354-2.663,0.354c-0.652,0-1.285-0.063-1.902-0.182c1.287,4.015,5.019,6.938,9.441,7.019  c-3.459,2.711-7.816,4.327-12.552,4.327c-0.815,0-1.62-0.048-2.411-0.142c4.474,2.869,9.786,4.541,15.493,4.541  c18.591,0,28.756-15.4,28.756-28.756c0-0.438-0.009-0.875-0.028-1.309C49.769,18.873,51.483,17.092,52.837,15.065z"/></svg>
  </a>
  

  <a id="github-link"
     class="icon" title="Github" aria-label="Github"
     href="https://github.com/gregorriegler">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" height="24" width="28"><path d="M12 2c6.625 0 12 5.375 12 12 0 5.297-3.437 9.797-8.203 11.391-0.609 0.109-0.828-0.266-0.828-0.578 0-0.391 0.016-1.687 0.016-3.297 0-1.125-0.375-1.844-0.812-2.219 2.672-0.297 5.484-1.313 5.484-5.922 0-1.313-0.469-2.375-1.234-3.219 0.125-0.313 0.531-1.531-0.125-3.187-1-0.313-3.297 1.234-3.297 1.234-0.953-0.266-1.984-0.406-3-0.406s-2.047 0.141-3 0.406c0 0-2.297-1.547-3.297-1.234-0.656 1.656-0.25 2.875-0.125 3.187-0.766 0.844-1.234 1.906-1.234 3.219 0 4.594 2.797 5.625 5.469 5.922-0.344 0.313-0.656 0.844-0.766 1.609-0.688 0.313-2.438 0.844-3.484-1-0.656-1.141-1.844-1.234-1.844-1.234-1.172-0.016-0.078 0.734-0.078 0.734 0.781 0.359 1.328 1.75 1.328 1.75 0.703 2.141 4.047 1.422 4.047 1.422 0 1 0.016 1.937 0.016 2.234 0 0.313-0.219 0.688-0.828 0.578-4.766-1.594-8.203-6.094-8.203-11.391 0-6.625 5.375-12 12-12zM4.547 19.234c0.031-0.063-0.016-0.141-0.109-0.187-0.094-0.031-0.172-0.016-0.203 0.031-0.031 0.063 0.016 0.141 0.109 0.187 0.078 0.047 0.172 0.031 0.203-0.031zM5.031 19.766c0.063-0.047 0.047-0.156-0.031-0.25-0.078-0.078-0.187-0.109-0.25-0.047-0.063 0.047-0.047 0.156 0.031 0.25 0.078 0.078 0.187 0.109 0.25 0.047zM5.5 20.469c0.078-0.063 0.078-0.187 0-0.297-0.063-0.109-0.187-0.156-0.266-0.094-0.078 0.047-0.078 0.172 0 0.281s0.203 0.156 0.266 0.109zM6.156 21.125c0.063-0.063 0.031-0.203-0.063-0.297-0.109-0.109-0.25-0.125-0.313-0.047-0.078 0.063-0.047 0.203 0.063 0.297 0.109 0.109 0.25 0.125 0.313 0.047zM7.047 21.516c0.031-0.094-0.063-0.203-0.203-0.25-0.125-0.031-0.266 0.016-0.297 0.109s0.063 0.203 0.203 0.234c0.125 0.047 0.266 0 0.297-0.094zM8.031 21.594c0-0.109-0.125-0.187-0.266-0.172-0.141 0-0.25 0.078-0.25 0.172 0 0.109 0.109 0.187 0.266 0.172 0.141 0 0.25-0.078 0.25-0.172zM8.937 21.438c-0.016-0.094-0.141-0.156-0.281-0.141-0.141 0.031-0.234 0.125-0.219 0.234 0.016 0.094 0.141 0.156 0.281 0.125s0.234-0.125 0.219-0.219z"></path>
</svg>

  </a>

  <a id="youtube-link"
     class="icon" title="Youtube" aria-label="Youtube"
     href="https://www.youtube.com/channel/UCsWg_i6X4KMhjD2CRqCJLdg">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="96.875px" height="96.875px" viewBox="0 0 96.875 96.875" style="enable-background:new 0 0 96.875 96.875;"
	 xml:space="preserve">
<g>
	<path d="M95.201,25.538c-1.186-5.152-5.4-8.953-10.473-9.52c-12.013-1.341-24.172-1.348-36.275-1.341
		c-12.105-0.007-24.266,0-36.279,1.341c-5.07,0.567-9.281,4.368-10.467,9.52C0.019,32.875,0,40.884,0,48.438
		C0,55.992,0,64,1.688,71.336c1.184,5.151,5.396,8.952,10.469,9.52c12.012,1.342,24.172,1.349,36.277,1.342
		c12.107,0.007,24.264,0,36.275-1.342c5.07-0.567,9.285-4.368,10.471-9.52c1.689-7.337,1.695-15.345,1.695-22.898
		C96.875,40.884,96.889,32.875,95.201,25.538z M35.936,63.474c0-10.716,0-21.32,0-32.037c10.267,5.357,20.466,10.678,30.798,16.068
		C56.434,52.847,46.23,58.136,35.936,63.474z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>

  <a id="goodreads-link"
     class="icon" title="goodreads" aria-label="goodreads"
     href="https://www.goodreads.com/user/show/22567057-gregor-riegler">
    <?xml version="1.0" ?><svg style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
	.st0{}
	.st1{fill:#202020;}
</style><g id="Edges"/><g id="Background_1_"><path class="st0" d="M492,268.3c-6.3,122.8-109.9,224.4-236.5,224.5c-126.7,0.1-230.7-101.6-237-224.5   C11.7,136.2,119.6,19.2,255.2,19.2C390.9,19.2,498.7,136.3,492,268.3z"/></g><g id="Symbol"><path class="st1" d="M346.6,137.5c0-4.3-0.4-8.6-0.6-12.8c-9.2,0-16.9,0-25.6,0c0,9.8,0,18.9,0,28.1   c-41.1-57.3-125.6-39.2-149.4,17.9c-15.2,36.6-14.4,73.4,1.5,109.4c16.8,38,65,54.1,102.8,43.4c2-0.3,4.3-0.9,6.8-1.7   c3.6-1.1,6.7-2.5,8.7-3.6c5.2-2.1,11.4-5.6,17.5-10.3c4.9-3.8,9.1-7.8,12.4-11.5c-0.9,14.3-1.3,28.7-3.6,42.8   c-2.8,17.4-10.8,32.4-27.4,41.2c-36.2,19.2-79.6,4.6-96-32.4c-8.2,0-16.6,0-25.4,0c1.8,24.4,14.7,40.3,34.7,50.6   c24.1,12.4,49.9,13.7,76.2,9.4c33.5-5.5,55.3-24.4,63-57.8c2.7-11.9,4.2-24.2,4.3-36.4C346.8,255,346.6,196.2,346.6,137.5z    M316.5,260.3c-4.8,13.8-12.8,24.7-23.3,32.2c-2.6,1.9-15.4,10.8-34.1,11.7c-1.1,0.1-4.2,0.2-8,0c-0.1,0.1-0.3,0.1-0.4,0.1   c-27.3-1.7-48.2-17.6-57.4-43.9c-7.7-22.1-7.9-44.6-2.3-67.1c8.1-32.5,31.6-52.4,61.6-53.2c0.7-0.1,1.1-0.1,1.1-0.1   c15.6-1.4,27.8,5.1,31.6,7.2c16.1,8.6,28.2,24.6,33.5,46C324.4,215.7,324.2,238.2,316.5,260.3z"/></g></svg>
  </a>

  <a id="email-link"
     class="icon" title="e-mail" aria-label="e-mail"
     href="mailto:rieglerg85@gmail.com">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 493.332 493.332" style="enable-background:new 0 0 493.332 493.332;" xml:space="preserve">
<g id="XMLID_78_">
	<g id="XMLID_79_">
		<g id="XMLID_80_">
			<path id="XMLID_81_" d="M352.731,450.956c3.037,9.789-2.044,20.213-11.616,23.878c-35.811,13.709-69.294,18.498-112.873,18.498
				c-117.663,0-221.147-84.347-221.147-223.275C7.095,125.46,112.003,0,272.2,0c124.735,0,214.036,85.764,214.036,204.845
				c0,103.483-58.12,168.693-134.66,168.693c-33.327,0-57.419-17.007-60.955-54.582h-1.424c-21.963,36.15-53.86,54.582-91.43,54.582
				c-46.082,0-79.376-34.022-79.376-92.142c0-86.475,63.769-165.147,165.841-165.147c18.691,0,38.9,2.795,55.909,7.172
				c16.425,4.227,26.861,20.236,24.147,36.978l-16.972,104.695c-7.072,41.818-2.112,60.953,17.721,61.666
				c30.475,0.711,68.762-38.272,68.762-119.786c0-92.15-59.543-163.732-169.41-163.732c-108.444,0-203.428,85.051-203.428,220.436
				c0,118.369,75.834,185.708,181.448,185.708c27.489,0,56.203-4.51,80.853-13.214c5.863-2.07,12.315-1.662,17.872,1.126
				c5.558,2.788,9.753,7.716,11.595,13.655L352.731,450.956z M293.954,181.362c0.534-3.626-1.892-7.027-5.496-7.696
				c-4.413-0.819-9.536-1.426-15.573-1.426c-46.771,0-83.617,46.076-83.617,100.653c0,26.94,12.037,43.946,35.423,43.946
				c26.231,0,53.876-33.31,60.265-74.425L293.954,181.362z"/>
		</g>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

  </a>

  <a id="subscribe-link"
     class="icon" title="Subscribe" aria-label="Subscribe"
     href="/feed.xml">
    <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <circle cx="6.18" cy="17.82" r="2.18"/>
    <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
</svg>
  </a>

  
  
  
  

  

  

  <!-- Optional additional links to insert for icons links -->
</nav>

  <p class="license">
  &copy; 2020.  <a href="/LICENSE.md">MIT License.</a>
</p>

</div>

    <main class="container">
      <div class="content">
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/07/21/spring-mvc-requestbody-and-responsebody.html">
        Spring MVC - @RequestBody and @ResponseBody demystified
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">21 Jul 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      In this post i want to dig into spring mvc a little, revealing what happens behind the scenes when a request is converted to your parameter object and vice versa. Before we start, i want to explain the purpose of these annotations.<br /><br /><h3>What are @RequestBody and @ResponseBody for? </h3><br />They are annotations of the spring mvc framework and can be used in a controller to implement smart object serialization and deserialization. They help you avoid boilerplate code by extracting the logic of messageconversion and making it an aspect. Other than that they help you support multiple formats for a single REST resource without duplication of code. If you annotate a method with @ResponseBody, spring will try to convert its return value and write it to the http response automatically. If you annotate a methods parameter with @RequestBody, spring will try to convert the content of the incoming request body to your parameter object on the fly.<br /><br />Here is an example<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Controller</span><br /><span style="color: #555555; font-weight: bold;">@RequestMapping</span><span style="color: #333333;">(</span>value <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">"/bookcase"</span><span style="color: #333333;">)</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">BookCaseController</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> BookCase bookCase<span style="color: #333333;">;</span><br /><br />    <span style="color: #555555; font-weight: bold;">@RequestMapping</span><span style="color: #333333;">(</span>method <span style="color: #333333;">=</span> RequestMethod<span style="color: #333333;">.</span><span style="color: #0000cc;">GET</span><span style="color: #333333;">)</span><br />    <span style="color: #555555; font-weight: bold;">@ResponseBody</span><br />    <span style="color: #008800; font-weight: bold;">public</span> BookCase <span style="color: #0066bb; font-weight: bold;">getBookCase</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> <span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">bookCase</span><span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@RequestMapping</span><span style="color: #333333;">(</span>method <span style="color: #333333;">=</span> RequestMethod<span style="color: #333333;">.</span><span style="color: #0000cc;">PUT</span><span style="color: #333333;">)</span><br />    <span style="color: #555555; font-weight: bold;">@ResponseStatus</span><span style="color: #333333;">(</span>HttpStatus<span style="color: #333333;">.</span><span style="color: #0000cc;">NO_CONTENT</span><span style="color: #333333;">)</span><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">setBookCase</span><span style="color: #333333;">(</span><span style="color: #555555; font-weight: bold;">@RequestBody</span> BookCase bookCase<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">bookCase</span> <span style="color: #333333;">=</span> bookCase<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br /><span style="color: #333333;">}</span><br /></pre></div><br /><h3>So what is Spring doing behind the scenes when we are using those Annotations?</h3><br />Depending on your configuration, spring has a list of <a href="http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html">HttpMessageConverters</a> registered in the background. A HttpMessageConverters responsibility is to convert the request body to a specific class and back to the response body again, depending on a predefined <a href="http://de.wikipedia.org/wiki/Multipurpose_Internet_Mail_Extensions">mime type</a>. Every time an issued request is hitting a @RequestBody or @ResponseBody annotation spring loops through all registered HttpMessageConverters seeking for the first that fits the given mime type and class and then uses it for the actual conversion.<br /><br /><h3>How can i add a custom HttpMessageConverter?</h3><br />By adding @EnableWebMvc respectively &lt;mvc:annotation-driven /&gt;, spring registers a bunch of predefined messageconverters for JSON/XML and so on. You can add a custom converter like the following<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #555555; font-weight: bold;">@Configuration</span><br /><span style="color: #555555; font-weight: bold;">@EnableWebMvc</span><br /><span style="color: #555555; font-weight: bold;">@ComponentScan</span><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">WebConfiguration</span> <span style="color: #008800; font-weight: bold;">extends</span> WebMvcConfigurerAdapter <span style="color: #333333;">{</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">configureMessageConverters</span><span style="color: #333333;">(</span>List<span style="color: #333333;">&lt;</span>HttpMessageConverter<span style="color: #333333;">&lt;?&gt;&gt;</span> httpMessageConverters<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        httpMessageConverters<span style="color: #333333;">.</span><span style="color: #0000cc;">add</span><span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> BookCaseMessageConverter<span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> MediaType<span style="color: #333333;">(</span><span style="background-color: #fff0f0;">"text"</span><span style="color: #333333;">,</span> <span style="background-color: #fff0f0;">"csv"</span><span style="color: #333333;">)));</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><br />In this example i've written a converter that handles the conversion of a BookCase, which is basically a List of Books. The converter is able to convert csv content to a BookCase and vice versa. I used <a href="http://opencsv.sourceforge.net/">opencsv </a>to parse the text.<br /><br />Here is the model<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">Book</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String isbn<span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">private</span> String title<span style="color: #333333;">;</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">Book</span><span style="color: #333333;">(</span>String isbn<span style="color: #333333;">,</span> String title<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">isbn</span> <span style="color: #333333;">=</span> isbn<span style="color: #333333;">;</span><br />        <span style="color: #008800; font-weight: bold;">this</span><span style="color: #333333;">.</span><span style="color: #0000cc;">title</span> <span style="color: #333333;">=</span> title<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #888888;">// ...</span><br /><span style="color: #333333;">}</span><br /><br /><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">BookCase</span> <span style="color: #008800; font-weight: bold;">extends</span> ArrayList<span style="color: #333333;">&lt;</span>Book<span style="color: #333333;">&gt;</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">BookCase</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">BookCase</span><span style="color: #333333;">(</span>Collection<span style="color: #333333;">&lt;?</span> <span style="color: #008800; font-weight: bold;">extends</span> Book<span style="color: #333333;">&gt;</span> c<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">super</span><span style="color: #333333;">(</span>c<span style="color: #333333;">);</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><br />and the actual converter<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: .1em .1em .1em .8em; border: solid gray; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">public</span> <span style="color: #008800; font-weight: bold;">class</span> <span style="color: #bb0066; font-weight: bold;">BookCaseMessageConverter</span> <span style="color: #008800; font-weight: bold;">extends</span> AbstractHttpMessageConverter<span style="color: #333333;">&lt;</span>BookCase<span style="color: #333333;">&gt;</span> <span style="color: #333333;">{</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">BookCaseMessageConverter</span><span style="color: #333333;">()</span> <span style="color: #333333;">{</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">BookCaseMessageConverter</span><span style="color: #333333;">(</span>MediaType supportedMediaType<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">super</span><span style="color: #333333;">(</span>supportedMediaType<span style="color: #333333;">);</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #008800; font-weight: bold;">public</span> <span style="color: #0066bb; font-weight: bold;">BookCaseMessageConverter</span><span style="color: #333333;">(</span>MediaType<span style="color: #333333;">...</span> supportedMediaTypes<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">super</span><span style="color: #333333;">(</span>supportedMediaTypes<span style="color: #333333;">);</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> <span style="color: #333399; font-weight: bold;">boolean</span> <span style="color: #0066bb; font-weight: bold;">supports</span><span style="color: #333333;">(</span>Class<span style="color: #333333;">&lt;?&gt;</span> clazz<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />        <span style="color: #008800; font-weight: bold;">return</span> BookCase<span style="color: #333333;">.</span><span style="color: #0000cc;">class</span><span style="color: #333333;">.</span><span style="color: #0000cc;">equals</span><span style="color: #333333;">(</span>clazz<span style="color: #333333;">);</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> BookCase <span style="color: #0066bb; font-weight: bold;">readInternal</span><span style="color: #333333;">(</span>Class<span style="color: #333333;">&lt;?</span> <span style="color: #008800; font-weight: bold;">extends</span> BookCase<span style="color: #333333;">&gt;</span> clazz<span style="color: #333333;">,</span> HttpInputMessage httpInputMessage<span style="color: #333333;">)</span> <span style="color: #008800; font-weight: bold;">throws</span> IOException<span style="color: #333333;">,</span> HttpMessageNotReadableException <span style="color: #333333;">{</span><br />        CSVReader reader <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> CSVReader<span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> InputStreamReader<span style="color: #333333;">(</span>httpInputMessage<span style="color: #333333;">.</span><span style="color: #0000cc;">getBody</span><span style="color: #333333;">()));</span><br />        List<span style="color: #333333;">&lt;</span>String<span style="color: #333333;">[]&gt;</span> rows <span style="color: #333333;">=</span> reader<span style="color: #333333;">.</span><span style="color: #0000cc;">readAll</span><span style="color: #333333;">();</span><br />        BookCase bookCase <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> BookCase<span style="color: #333333;">();</span><br />        <span style="color: #008800; font-weight: bold;">for</span> <span style="color: #333333;">(</span>String<span style="color: #333333;">[]</span> row <span style="color: #333333;">:</span> rows<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />            bookCase<span style="color: #333333;">.</span><span style="color: #0000cc;">add</span><span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> Book<span style="color: #333333;">(</span>row<span style="color: #333333;">[</span><span style="color: #0000dd; font-weight: bold;">0</span><span style="color: #333333;">],</span> row<span style="color: #333333;">[</span><span style="color: #0000dd; font-weight: bold;">1</span><span style="color: #333333;">]));</span><br />        <span style="color: #333333;">}</span><br />        <span style="color: #008800; font-weight: bold;">return</span> bookCase<span style="color: #333333;">;</span><br />    <span style="color: #333333;">}</span><br /><br />    <span style="color: #555555; font-weight: bold;">@Override</span><br />    <span style="color: #008800; font-weight: bold;">protected</span> <span style="color: #333399; font-weight: bold;">void</span> <span style="color: #0066bb; font-weight: bold;">writeInternal</span><span style="color: #333333;">(</span>BookCase books<span style="color: #333333;">,</span> HttpOutputMessage httpOutputMessage<span style="color: #333333;">)</span> <span style="color: #008800; font-weight: bold;">throws</span> IOException<span style="color: #333333;">,</span> HttpMessageNotWritableException <span style="color: #333333;">{</span><br />        CSVWriter writer <span style="color: #333333;">=</span> <span style="color: #008800; font-weight: bold;">new</span> CSVWriter<span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> OutputStreamWriter<span style="color: #333333;">(</span>httpOutputMessage<span style="color: #333333;">.</span><span style="color: #0000cc;">getBody</span><span style="color: #333333;">()));</span><br />        <span style="color: #008800; font-weight: bold;">for</span> <span style="color: #333333;">(</span>Book book <span style="color: #333333;">:</span> books<span style="color: #333333;">)</span> <span style="color: #333333;">{</span><br />            writer<span style="color: #333333;">.</span><span style="color: #0000cc;">writeNext</span><span style="color: #333333;">(</span><span style="color: #008800; font-weight: bold;">new</span> String<span style="color: #333333;">[]{</span>book<span style="color: #333333;">.</span><span style="color: #0000cc;">getIsbn</span><span style="color: #333333;">(),</span> book<span style="color: #333333;">.</span><span style="color: #0000cc;">getTitle</span><span style="color: #333333;">()});</span><br />        <span style="color: #333333;">}</span><br />        writer<span style="color: #333333;">.</span><span style="color: #0000cc;">close</span><span style="color: #333333;">();</span><br />    <span style="color: #333333;">}</span><br /><span style="color: #333333;">}</span><br /></pre></div><br /><h3>The Result&nbsp; </h3>We can now issue text/csv requests to our Resource along with application/json and xml which are basically supported out of the box.<br /><br />1.)<br /><pre><b>PUT /bookcase</b><br /><i><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">Content-Type: text/csv</span></i><br /><span style="color: blue;"><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">"123","Spring in Action"<br />"456","Clean Code"</span></span><br /><br /><b><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">Response</span></b><br /><span style="color: #6aa84f;"><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">204 No Content</span></span></pre>2.)<span style="color: #6aa84f;"><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv"></span></span><br /><pre><b><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">GET /bookcase</span></b><br /><i><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">Accept: text/csv</span></i><br /><br /><b><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">Response</span></b><br /><span style="color: #6aa84f;"><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">200 OK</span></span><br /><span style="color: blue;"><span class="label" data-header-id="f9beee7543227809ba788522f2ba5b9d61a0d03a" title="Content-Type: text/csv">"123","Spring in Action"<br />"456","Clean Code"</span></span><br /></pre><br />Thanks to the design of spring mvc, which is following the single responsibility principle, our controller stays thin. We don't have to add a single line if we want to support new media types.<br /><br /><h3>The complete example is available on my <a href="https://github.com/gregorriegler/babdev-spring/tree/master/message-converter">github</a>  </h3>
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/07/21/spring-mvc-requestbody-and-responsebody.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/07/08/modern-web-development.html">
        Modern Web Development
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">08 Jul 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      In the last few years web technology has lived through rapid growth and heavy change. We went from frames to table layouts, to column layouts, to responsive layouts. From html4 to xhtml &amp; flash to html5. From heavy server to rich client. From rpc to soap to rest. From sql to nosql and big data. From MVC to MVP and so on. In the following post i want to describe what has become state-of-the-art from my perspective.<br /><br /><h3>A Backend is a REST api&nbsp; </h3>Every backend should be seen as a REST api and every controller as another resource. You want to analyze your problem domain, find your resources and design proper paths for them. They become the M in your MVC Architecture. Developing a webapplication first, and adding an extra REST api later on has to be considered an antipattern. If you do make a REST api, you want to consequently use it yourself, making your frontend its first consumer. This procedure allows you to smoothly add different kinds of clients  later on, such as a mobile app or even a desktop application. It's also  the foundation to integrate your applications features into other  applications.<br /><br /><h3>Separate your Frontend</h3>The days when you made up a form using jsp with a jstl form validation are fading. You don't want to mix client with server technology anymore. The V and C of MVC has shifted over to the client and your backend just represents the Model. You want your frontend to be completely separated using client technology only (html/css/js) and consuming your REST api. GUI logic, building and aligning proper html elements can be achieved within javascript. The most appropriate content-type for information exchange between the backend and frontend would be json or even xml.<br /><br /><h3>Rich Client &amp; Hail JavaScript</h3>The MVC pattern is nowadays implemented on the client side using javascript and it's fellow frameworks. There is no full-blown complete javascript framework that can achieve everything out of the box, but there are tons of smaller libs solving atomic tasks. This should not be considered bad or overwhelming, but advantageous. It causes a great variety of tools that focus on solving single problems outright. <a href="http://documentcloud.github.io/backbone/">Backbone</a> is a popular mvc framework built upon <a href="http://underscorejs.org/">underscore</a>, a js library delivering great utility with remarkable functional programming features. A template engine like <a href="http://mustache.github.io/">mustache</a> or <a href="http://handlebarsjs.com/">handlebars</a> could be added and <a href="http://requirejs.org/">requirejs</a> would manage the dependencies within your modules. Of course, a dom manipulator like <a href="http://jquery.com/">jquery</a> cannot be left out. The trend is leading towards <a href="http://en.wikipedia.org/wiki/Single-page_application">SPA</a>'s (Single Page Applications) with heavy <a href="http://en.wikipedia.org/wiki/AJAJ">AJAJ</a><a href="http://en.wikipedia.org/wiki/Ajax_%28programming%29">/AJAX</a>, routing through html <a href="http://en.wikipedia.org/wiki/HTML_element#Anchor">#anchors</a> representing bookmarkable view-states.<br /><br /><h3>Implement a Buildprocess for your Frontend</h3>As Browsers are continously increasing javascript performance and adding more and more support for html5, frontends have become complex and sophisticated. You now want to add a build process for your frontend, compiling all your js and css files. You want to deliver only a single minified js file to the browser. Other than that we don't break the DRY principle writing styles anymore. We use dynamic stylesheet languages like <a href="http://lesscss.org/">less</a> to make our styles smarter and cleaner and compile them to css in our build process. <a href="http://nodejs.org/">Node</a> and <a href="https://developer.mozilla.org/en-US/docs/Rhino">rhino</a> are possible engine candidates to build your frontend. While node is much faster, it requires an easy installation on the build server. Rhino runs in a jvm, thus not requiring an installation. You can add it to your project as a maven dependency. <br /><br /><h3>Mobile Web &amp; Responsive Design</h3>Mobile devices are becoming more powerful in terms of hardware whilst html5 support is also rapidly increasing  on mobile browsers. Html5 could potentially make native mobile applications obsolete one day. Localstorage, SQL, Geolocation, Multimedia, Camera Access, Web Sockets, Graphics, Touch Events, WebGL, Filesystem Access, Notifications and many more are all features to be completely available to mobile html5 webapplications one day, hopefully working on all devices. So far, we have been developing multiple applications for android/ios/windows mobile and so on, being an economic nightmare.<br />Mobile clients have gained a substantial amount in web consumership, and cannot be ignored anymore. Therefor you want to make your GUI <a href="http://en.wikipedia.org/wiki/Responsive_design">reponsive</a>, beeing able to scale down to smaller display-resolutions. Wise companies have even started designing userinterfaces for the smallest resolution before even thinking of a desktop resolution. This makes scaling more easy, since the other way round is harder and tends to force painfull workarounds. <a href="http://twitter.github.io/bootstrap/">Bootstrap</a> is one of many libraries that help you make your gui responsive. You can use <a href="http://www.initializr.com/">initializr</a> to get started.<br /><br /><h3><a href="http://www.gwtproject.org/">GWT</a> or <a href="http://www.zkoss.org/">ZK Framework</a>? Use Neither!</h3>GWT/ZK are trying do deliver a framework that makes it possible to develop modern ajax web applications using Java only. So they are basically building a java wrapper for frontend technology. Other than that, they deliver a huge amount of components. BUT ... i'd like to question their philosophy for many reasons.<br /><ul><li>They Both produce quite bad html code making you end in an element and dom-id nightmare that gets hard or even impossible to test, debug and style. Html5 allows to write short, clean and readable code, organized way better. You want to write html yourself.</li><li>Their AJAX calls are not based on the REST api that you need. If you want a REST api, you may have to write that again. RPC is GWT's primary communication-technology and i am really concerned about that. But you can still make a REST api work with GWT if you like to.</li><li>They keep you away from the technology that you are actually producing. Tiny customizations can get hard or even impossible in the end. You are basically giving up control and limiting your possibilities. This might in many cases lead to dead ends, that are based on the framework, not the technology. GWT helps to overcome this problem offering JSNI.</li><li>They are never up to date. While browsers are evolving rapidly, new features have to be implemented in the Java-Wrapper before you can even use them, delaying your up-to-dateness.</li><li>I doubt that wrapping native front-end technology is a good idea, and i don't see a reason for doing it. One pro GWT argument might be: it's generating optimized JS code.</li></ul>In the end they make it easier to build webapplications for former java.awt/swing developers, who have no to little knowhow on html/css/js.<br />They defintively have their place right now and aren't a bad choice in some cases.<br /><br />
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/07/08/modern-web-development.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/06/13/what-makes-great-developer.html">
        What makes a great Developer
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">13 Jun 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <ul></ul><h3>Passion</h3>It's the taste of success that comes with every little task that you've mastered, and smart solutions you've found that turn out advantageous. Programming is not just a job, it's an Art - it's Poetry. With Passion comes Motivation and thus Progress. Software development is not only huge, but also evolving very fast. A good developer enjoy's keeping up-to-date, since he knows that there's always a better way to do something. Learning new ways, satisfies his hunger.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-8sln7eXSJLM/UbotalRZX7I/AAAAAAAAADM/eh9gZyh7jgE/s1600/computer-cartoon-happy-guy2.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-8sln7eXSJLM/UbotalRZX7I/AAAAAAAAADM/eh9gZyh7jgE/s320/computer-cartoon-happy-guy2.gif" width="311" /></a></div><br /><h3>Curiosity</h3>A Program is deterministic. There is no such thing as an accident in a computers world. Every effect has its cause. A great developer does not accept accidents. He'd rather search and debug the numerous layers of a Software and it's environment to find the very reason. He builds up deep knowledge by doing that, allowing him to better understand, read and interpret weird behaviour of an application. A good developer does not <a href="http://en.wikipedia.org/wiki/Programming_by_permutation">program by Accident</a>.<br /><br />“The important thing is not to stop questioning.  Curiosity has its own reason for existing.” - Albert Einstein<br /><br />"The most likely way for the world to be destroyed, most experts  agree, is by accident. That's where we come in; we're computer  professionals. We cause accidents." -&nbsp;  <br />Nathaniel Borenstein<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-iyGqooSxvbo/UboeJhPGqTI/AAAAAAAAACE/ajvZ9djAxBg/s1600/curiosity2.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-iyGqooSxvbo/UboeJhPGqTI/AAAAAAAAACE/ajvZ9djAxBg/s1600/curiosity2.jpg" /></a></div><br /><br /><h3>Cognition</h3>Programming is the act of solving a problem. Problems can be factorized into multiple parts that work together as a whole. To find and reflect those in your mind, and imagine their interaction is a true skill. There is nothing more to say about that.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-L7o6T5xIQc8/Uboiz-PepSI/AAAAAAAAACU/K5iIsFLTYvI/s1600/image030.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://3.bp.blogspot.com/-L7o6T5xIQc8/Uboiz-PepSI/AAAAAAAAACU/K5iIsFLTYvI/s320/image030.jpg" width="320" /></a></div><br /><h3>Meticulosity</h3>Programming is full pitfalls that can be tracked down to the very microcosm of Software Development. The Devil is in the details, and even the smallest sluttery can easily tear a Project down. That's why perfection is so powerful, and important for high quality and success. If you accept a single flaw, you will most likely accept a second, ... and a third ... until you got a mess. A good developer cannot accept flaws and thus avoids many pitfalls increasing quality. There is an analogy to the <a href="http://en.wikipedia.org/wiki/Broken_windows_theory">Broken Windows Theory</a>, which basically says that a single broken window can easily lead to more serious deviance, crime, abandonment and demolishment of its house.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-vt2UqSUJ9Js/Ubon3XlLSOI/AAAAAAAAACk/nTrXt3rz0-I/s1600/precision.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-vt2UqSUJ9Js/Ubon3XlLSOI/AAAAAAAAACk/nTrXt3rz0-I/s1600/precision.jpg" /></a></div><br /><h3>Time</h3>Greatness comes with experience. It's the iterations of improvement that have been lived through, that really matter. Yes, you can simply follow advices, patterns and best practice. But that has nothing to do with Wisdom, which evolves by doing mistakes and iterations.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/--AX9ojXHMz8/UbooCe59PcI/AAAAAAAAACs/lYXT5lqCV98/s1600/sheep-with-an-afro.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://4.bp.blogspot.com/--AX9ojXHMz8/UbooCe59PcI/AAAAAAAAACs/lYXT5lqCV98/s400/sheep-with-an-afro.jpg" width="400" /></a></div><br /><h3>Humbleness</h3>A great developer knows that he doesn't, and will never know everything. He knows, that there is always room for improvement, also in his own work. He admits his mistakes and accepts critisism.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-h4rJJ1Zt5Ew/Uboqp5rTpbI/AAAAAAAAAC8/ZuQS4lSk8JY/s1600/vor-lastwagen-verneigen.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="251" src="http://2.bp.blogspot.com/-h4rJJ1Zt5Ew/Uboqp5rTpbI/AAAAAAAAAC8/ZuQS4lSk8JY/s320/vor-lastwagen-verneigen.jpg" width="320" /></a></div><br /><h3>Tenacity</h3>A good developer declares war on every workaround. He will fight it even if he has to struggle hour after hour, through the night, until the sun rises. Even the greatest developer meets problems, that he might not consider solvable in the first place. But he takes it as a challenge, unless it's not an antipattern. "It won't work" is not an option. Hard-earned success evolves self-confidence.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-ZYTaDp_SzzU/Ubouofvgc9I/AAAAAAAAADg/_svH6kKAFDA/s1600/never-give-up-frog-211x300.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-ZYTaDp_SzzU/Ubouofvgc9I/AAAAAAAAADg/_svH6kKAFDA/s1600/never-give-up-frog-211x300.jpg" /></a></div><h2></h2><h3>Vision</h3>In Software development, it is common to work long times on small tasks. While beeing focused, it's easy to get lost and overlook the impact on the rest of the system. A good developer is skilled in keeping an eye on the bigger picture, foreseeing sideeffects of a current decision. Still he may intentionally choose to postpone their treatment going step-by-step.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-6qhhYWfdPgs/Ubx3Eu_0OnI/AAAAAAAAAD0/0Wd3VpjcQhI/s1600/1024px-Spyglass.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="132" src="http://1.bp.blogspot.com/-6qhhYWfdPgs/Ubx3Eu_0OnI/AAAAAAAAAD0/0Wd3VpjcQhI/s320/1024px-Spyglass.jpg" width="320" /></a></div><br /><h3>Lazyness</h3>This might sound stupid in the first place, but its not. Lazyness leads to a lot of improvements. The  probably most important thing it leads to is Automation. Everytime you  have successfully refused to do something manually by automating it, you  have already improved. Automation is the key to faultlessness,  efficiency and progress. Faultlessness, because ideally a computer  doesnt make any mistakes (which is not entirely true in every aspect),  but humans do real quick. Efficiency, because it's an investment saving  time in the long run. The earlier you automate something, the more you  get out of it. Progress, because every process that  does not demand mental resources anymore leaves room for something else.  What you don't have to think of doesn't hinder you, whereas software  development is actually completely blown up with barriers that you have  to think of all the time. <br /><br />A good developer is too lazy to<br /><ul><li>write a complete API doc, he lets JavaDoc do the job.</li><li>format his code properly, he lets his IDE do the job.</li><li>test a functionality over and over again, so he automates it using xUnit.&nbsp;</li><li>read complicated methods, so he writes short readable methods with good names.</li><li>write the same lines of code all over again. He seeks for ways to  refactor to avoid such boilerplate code, since he is too lazy to repeat  himself. (<a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a>)</li><li>implement that functionality that nobody asked for. (<a href="http://en.wikipedia.org/wiki/YAGNI">YAGNI</a>)</li><li>use bitwise shifting for a subtraction, he keeps it simple stupid (<a href="http://en.wikipedia.org/wiki/KISS_principle">KISS</a>).</li><li>write code at all, he lets his colleague do it for him (<a href="http://en.wikipedia.org/wiki/Pair_programming">Pair Programming</a>). <br />Nah, i was just kidding on this one ;-)&nbsp;</li></ul><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-TOzmVyAzDf4/Ubotw2VKS5I/AAAAAAAAADU/GjBxZOaAgWE/s1600/garfield.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-TOzmVyAzDf4/Ubotw2VKS5I/AAAAAAAAADU/GjBxZOaAgWE/s1600/garfield.jpg" /></a></div><br /><h3>What do you think makes a great developer?</h3>
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/06/13/what-makes-great-developer.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/05/21/the-art-of-naming.html">
        The Art of Naming
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">21 May 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Handler</span> <span style="color: #303030;">{</span><br />    <br />    <span style="color: green; font-weight: bold;">private</span> String data<span style="color: #303030;">;</span><br />    <span style="color: green; font-weight: bold;">private</span> String temp<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">int</span> <span style="color: #0060b0; font-weight: bold;">c</span><span style="color: #303030;">(</span><span style="color: #303090; font-weight: bold;">int</span> a<span style="color: #303030;">,</span> <span style="color: #303090; font-weight: bold;">int</span> a2<span style="color: #303030;">){</span><br />        <span style="color: #303090; font-weight: bold;">int</span> result <span style="color: #303030;">=</span> a<span style="color: #303030;">+</span>a2<span style="color: #303030;">;</span><br />        <span style="color: grey;">//...</span><br /></pre></td></tr></tbody></table></div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-4-EmMuW5W_M/UZZ9Sp_CxVI/AAAAAAAAABw/zLW-M2JE4lo/s1600/12178628141677313153AJ_Buddy_frightened.svg.hi.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="200" src="http://3.bp.blogspot.com/-4-EmMuW5W_M/UZZ9Sp_CxVI/AAAAAAAAABw/zLW-M2JE4lo/s200/12178628141677313153AJ_Buddy_frightened.svg.hi.png" width="180" /></a></div><br /><h3>Why is Naming so important?</h3>Because its a matter of Quality.<br />Naming = Readability = Understandability = Maintainability = Quality.<br />Good Names make your code readable, which is an essential feature for every person that has to work on it, including yourself. Soon after written, you'll forget about the details. Getting into it and understanding again can be tough and frustrating. The right Names will redeem yourself and others from those barriers. You'll might think for yourself: "No!!! I don't have the time to make this all clean and perfect. I just have to get the thing done as fast as possible, and it's no problem because i won't have to deal with it after its finished anyways..." - That's just wishful thinking. Software never ever becomes completed. Thats part of its nature. In fact, the opposite is the truth: By choosing the right names carefully, you save a lot of time from the very first day on. You keep your mind free of needless noise that slows your progression down.<br /><br /><h3>How to choose the right Names?</h3>According to "<a href="http://www.amazon.de/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">Clean Code</a>", Names should:<br /><ul><li>Be intention revealing</li><li>Avoid disinformation</li><li>Make meaningful distinctions</li><li>Be pronounceable</li><li>Be searchable</li></ul>But i'll add one point<br /><ul><li>be unmistakable (which might already be part of avoiding disinformation)</li></ul><br />Be skeptical about a name in the first place, and dont accept it until every bit of skepticism has been eliminated. Complete Words are usually better than Acronyms, AND .... avoid redundancy!!<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Book</span><span style="color: #303030;">{</span><br /><br />  <span style="color: green; font-weight: bold;">public</span> String<span style="color: #303030;">[]</span> <strike>book</strike>Page<span style="color: #303030;">;</span> <span style="color: grey;">// Don't repeat book since its given in the classname!</span><br /></pre></td></tr></tbody></table></div><br />The art is to combine good names so that your code becomes a meaningful, selfdocumenting story.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">if</span><span style="color: #303030;">(</span>plant<span style="color: #303030;">.</span><span style="color: #0000c0;">needsWater</span><span style="color: #303030;">())</span> gardener<span style="color: #303030;">.</span><span style="color: #0000c0;">water</span><span style="color: #303030;">(</span>plant<span style="color: #303030;">)</span><br /></pre></td></tr></tbody></table></div><br /><h3>Classes, Interfaces and Abstracts</h3>Stay away from 'Manager', 'Handler' and the such. 'SomethingManager' doesn't mean anything specific and is clearly not unmistakable. Use Design Patterns in your Names. They are common knowledge and give a good information about what a Class is doing. Eg.: ShadowedBorderDecorator. Name Interfaces as what they are, and don't add Pre- / Suffixes to them (IFoo, BarInterface). Client-classes don't care if they work on Interfaces or Implementations. And it's not the Names job to indicate it's Type. You dont name a Variable intNumber either, do you? It's a violation of the DRY principle. Using Abstract in a Classname is debatable. While it's pretty common, it still violates the DRY principle. Decide for yourself.<br /><br /><h3>Common Errors in Variablenaming</h3><br /><b>Repeating Type in Variablenames:</b><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4</pre></td><td><pre style="line-height: 125%; margin: 0;">Timestamp creationTime<span style="color: #303030;">;</span><br />Date date<span style="color: #303030;">;</span><br />String<span style="color: #303030;">[]</span> bookArray<span style="color: #303030;">;</span><br />SomeType somethingObject<br /></pre></td></tr></tbody></table></div><br /><b>Adding "is" as a Prefix to booleans:</b><br />isActive. So the getter becomes isIsActive() or what?<br /><br /><b>Consecutive numbers.</b><br />There is nothing harder to read than a calculation using a1, a2 and a3 multiple times.<br /><br /><b>Generic names</b>:<br />temp, data, other, object, result, value and so on<br /><br /><b>Inconsistency:</b><br />Mixing multiple Naming Strategies, or choosing one without 100% sticking to it.<br />E.g.: Mixing camelCase with under_scored
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/05/21/the-art-of-naming.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/05/08/master-unpredictable.html">
        Master the unpredictable
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">08 May 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Have you ever come to work on a Project that you cant quite overlook? Are Requirements not yet clear or changing fast? Here are some tips to get along.<br /><br /><h3>Use Tracer Bullets</h3>Don't specify your software to death. Just grab your best idea, and give it a shot. Tracer Bullets are similar to Prototypes with one very important difference. Prototypes are built to proove something, and then be thrown away. They are not intended for real production. Even some drawing on a paper could be a prototype. A Tracer Bullet might get thrown away, but it is not intended to in the first place. It is developed as stable, clean and complete as needed, to use it for real production. A Tracer Bullet that hits its target, becomes a trunk.<br /><br /><h3>Develop Leaves first</h3>What do i mean with a leaf? Leaves are small exchangable software components or modules, that can be written independently, tested in isolation, and sometimes even run autonomous. They only perform a very specific task, not more. Find the leaves in your Project, and start developing the leaf with the highest risk.<br /><br /><h3>Dont Reinvent the Wheel</h3>99% of the problems that you face in your project have already been solved. Solving these by yourself can easily become a waste of time. Even the most trivial seeming problems are not trivial at all. Underestimating those is the issue in the first place, nevertheless it happens all the time. Well, its just logical to understimate the unsolved as you cannot know all the details until you solved it yourself. Analysing the problemdomain, concepting and realizing a solution can be a great way to learn, but is not very beneficial. Its in fact a risk, since it can lead to misconception or become a timeconsuming task that exceed your resources. You might even have to throw away your first attempts. Also, your outcome would be buggy, whereas established opensource software is usually stable thanks to its brave communities.<br />"Make or Buy" was a common phrase. I think it should be "Make or Find" by now, since opensource got really big. Rather invest your time into research opensource, and stay skeptical with what you find. When you compare 3rd party software, consider<br /><ul><li><b>Stability</b>: Is it still beta, or did it have some stable releases yet? Who is the organization behind? Is the code clean and tested?</li><li><b>Activity</b>: Can you find out how many developers this software has? When was the last commit? How frequently do they release a new build?</li><li><b>Support</b>: Does it offer a good documentation? How about examples? Is there a public Issue Tracker? How many issues have been submitted yet and how many have been solved? Is there a Forum, literature, and a big community? Are there any big names that use this software?</li><li><b>Critisism</b>: Is there anything bad that you should know in the first place? Search for reliable critiques and comparisons.</li></ul><br /><ul></ul><h3>Estimation is a waste of time</h3>Every hour that you invest in estimation, could also be invested in producing real outcome. Your estimation will be inaccurate anyway. When requirements change, you even have to change your estimations. If you have to estimate, because the business needs it, try to split your project into smaller independent parts first, and multiply your estimation with a risk factor (times two for example). In the end you`ll need it.<br /><br /><br />
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/05/08/master-unpredictable.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/04/26/standalone-java-webapp-made-easy-with.html">
        Standalone Java Webapp made easy with Maven
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">26 Apr 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <h2>Introduction </h2>As you may already know, creating a war archive and deploying it on a preinstalled Servlet Container is not the only way running a Java webapp, since you can also embed the Web-Server in the application itself. Sometimes such artifacts are delivered as standalone executable programs that can be easily started and stopped in the commandline and even run as a service in the background. Maybe you should also consider producing your app this way and benefit from its huge advantages:<br /><ul><li>No preinstalled Webserver/Servlet Container required that would take additional maintenance.</li><li>Easy Cross-Platform. Same artifact can of course be run on any System.</li><li>Complete Standalone Software </li></ul><a href="http://www.sonarsource.org/">Apache Sonar</a> is a great Example of such Software. It uses an embedded Jetty Server and creates an embedded H2 Database for persistence that can be replaced in configuration. As you can see <a href="http://svn.codehaus.org/sonar/trunk/sonar-application/src/main/assembly/bin/">here</a> they prepared startup scripts for any Platform that execute the actual <a href="http://svn.codehaus.org/sonar/trunk/sonar-application/src/main/java/org/sonar/application/StartServer.java">StartServer</a> class.<br /><h2>Embedded Tomcat</h2>In my tutorial ill use an embedded Tomcat as a Servlet Container. So we want to add the Maven dependencies first.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: grey;">&lt;!-- embedded Tomcat --&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-core<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-logging-log4j<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /><span style="color: #007000;">&lt;dependency&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.tomcat.embed<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>tomcat-embed-jasper<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>7.0.37<span style="color: #007000;">&lt;/version&gt;</span><br /><span style="color: #007000;">&lt;/dependency&gt;</span><br /></pre></td></tr></tbody></table></div><br />We can use them now to create a StartServer class<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">final</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">StartServer</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #0060b0; font-weight: bold;">StartServer</span><span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">static</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">main</span><span style="color: #303030;">(</span>String<span style="color: #303030;">[]</span> args<span style="color: #303030;">)</span> <span style="color: green; font-weight: bold;">throws</span> Exception <span style="color: #303030;">{</span><br />        <br />        <span style="color: grey;">// We will set the basedir Systemproperty accordingly when running the Program</span><br />        <span style="color: grey;">// Actually the mavenplugin appassembler will do this for us</span><br />        String basedir <span style="color: #303030;">=</span> System<span style="color: #303030;">.</span><span style="color: #0000c0;">getProperty</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"basedir"</span><span style="color: #303030;">);</span><br />        String webappLocation <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> File<span style="color: #303030;">(</span>basedir <span style="color: #303030;">+</span> <span style="background-color: #fff0f0;">"/webapp"</span><span style="color: #303030;">).</span><span style="color: #0000c0;">getAbsolutePath</span><span style="color: #303030;">();</span><br />        <span style="color: #303090; font-weight: bold;">int</span> port <span style="color: #303030;">=</span> <span style="color: #0000d0; font-weight: bold;">8080</span><span style="color: #303030;">;</span><br /><br />        Tomcat tomcat <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> Tomcat<span style="color: #303030;">();</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">setPort</span><span style="color: #303030;">(</span>port<span style="color: #303030;">);</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">addWebapp</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"/"</span><span style="color: #303030;">,</span> webappLocation<span style="color: #303030;">);</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">start</span><span style="color: #303030;">();</span><br />        tomcat<span style="color: #303030;">.</span><span style="color: #0000c0;">getServer</span><span style="color: #303030;">().</span><span style="color: #0000c0;">await</span><span style="color: #303030;">();</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><h2>Exploded War</h2>Now we need to make an exploded war in our "target" directory. I choose to create a folder inside "target" that holds the application as a whole including bin files, configuration and the webapp itself. This makes it easy to transport the complete app to another machine.<br /><ul><li>src/... </li><li>target/myapp/bin</li><li>target/myapp/conf</li><li>target/myapp/webapp</li></ul>Ill include the maven-war-plugin to create the exploded war.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>maven-war-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>2.3<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;id&gt;</span>war-exploded<span style="color: #007000;">&lt;/id&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>package<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>exploded<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />            <span style="color: #007000;">&lt;configuration&gt;</span><br />                <span style="color: #007000;">&lt;webappDirectory&gt;</span>${project.build.directory}/myapp/webapp<span style="color: #007000;">&lt;/webappDirectory&gt;</span><br />                <span style="color: #007000;">&lt;archiveClasses&gt;</span>true<span style="color: #007000;">&lt;/archiveClasses&gt;</span><br />            <span style="color: #007000;">&lt;/configuration&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />If you run <i>mvn clean package</i> right now you should get your webapp compiled into <i>target/myapp/webapp</i><br /><h2>Startup Scripts</h2>Finally we need startup Scripts to actually run our application. We need a shell script for unix Systems and a bat file for Windows. The <a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/">Appassembler</a> maven plugin comes in handy here. It is a very thoughtout plugin that creates exactly what we need and even sets the basedir Systemproperty. I'll configure it to use our exploded webapp and StartServer class.<br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;plugin&gt;</span><br />    <span style="color: #007000;">&lt;groupId&gt;</span>org.codehaus.mojo<span style="color: #007000;">&lt;/groupId&gt;</span><br />    <span style="color: #007000;">&lt;artifactId&gt;</span>appassembler-maven-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span><br />    <span style="color: #007000;">&lt;version&gt;</span>1.3<span style="color: #007000;">&lt;/version&gt;</span><br />    <span style="color: #007000;">&lt;configuration&gt;</span><br />        <span style="color: #007000;">&lt;assembleDirectory&gt;</span>${project.build.directory}/myapp<span style="color: #007000;">&lt;/assembleDirectory&gt;</span><br />        <span style="color: #007000;">&lt;repositoryLayout&gt;</span>flat<span style="color: #007000;">&lt;/repositoryLayout&gt;</span><br />        <span style="color: #007000;">&lt;repositoryName&gt;</span>webapp/WEB-INF/lib<span style="color: #007000;">&lt;/repositoryName&gt;</span><br />        <span style="color: #007000;">&lt;generateRepository&gt;</span>false<span style="color: #007000;">&lt;/generateRepository&gt;</span><br />        <span style="color: #007000;">&lt;copyConfigurationDirectory&gt;</span>true<span style="color: #007000;">&lt;/copyConfigurationDirectory&gt;</span><br />        <span style="color: #007000;">&lt;configurationDirectory&gt;</span>conf<span style="color: #007000;">&lt;/configurationDirectory&gt;</span><br />        <span style="color: #007000;">&lt;programs&gt;</span><br />            <span style="color: #007000;">&lt;program&gt;</span><br />                <span style="color: #007000;">&lt;mainClass&gt;</span>com.myapp.StartServer<span style="color: #007000;">&lt;/mainClass&gt;</span><br />                <span style="color: #007000;">&lt;name&gt;</span>myapp<span style="color: #007000;">&lt;/name&gt;</span><br />            <span style="color: #007000;">&lt;/program&gt;</span><br />        <span style="color: #007000;">&lt;/programs&gt;</span><br />    <span style="color: #007000;">&lt;/configuration&gt;</span><br />    <span style="color: #007000;">&lt;executions&gt;</span><br />        <span style="color: #007000;">&lt;execution&gt;</span><br />            <span style="color: #007000;">&lt;phase&gt;</span>package<span style="color: #007000;">&lt;/phase&gt;</span><br />            <span style="color: #007000;">&lt;goals&gt;</span><br />                <span style="color: #007000;">&lt;goal&gt;</span>assemble<span style="color: #007000;">&lt;/goal&gt;</span><br />            <span style="color: #007000;">&lt;/goals&gt;</span><br />        <span style="color: #007000;">&lt;/execution&gt;</span><br />    <span style="color: #007000;">&lt;/executions&gt;</span><br /><span style="color: #007000;">&lt;/plugin&gt;</span><br /></pre></td></tr></tbody></table></div><br />Done. Appassembler now creates executable scripts for all platforms inside the <i>target/myapp/bin</i> directory. You could even put configuration files into <i>src/main/config</i> that would be copied into <i>target/myapp/conf</i> automatically by the plugin.<br /><br /><h2>Result</h2><br />If we run mvn clean package now we get a completely transportable standalone webapp in our <i>target</i> directory!<br /><br /><h2></h2><h2></h2>
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/04/26/standalone-java-webapp-made-easy-with.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/04/10/i18n-of-jpa-entities.html">
        I18n of JPA Entities
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">10 Apr 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Sadly the support for i18n for Entities in JPA is actually very poor to non-existent. There's just basically no out of the box solution provided by Hibernate &amp; Co, although i18n is a feature that could be considered mandatory for a powerful ORM Framework. If you take a look at PHP for example Doctrine supports i18n very well. So besides some really unpopular i18n extensions on forums/github you are basically on your own.<br /><br /><h3>So how do you do it? </h3>There isn't really a general solution to achieve i18n. There are many different ways and you have to choose which is actually best for you. If you do have a relatively small amount of data and ordering by translations is not necessary you can store "keys" in your tables that are being translated by Spring i18n for example. Spring i18n could store the translations in separate property files. Since you wont have to worry about performance, this is a very easy way to achieve i18n.<br /><br />But lets say you have lots of data, and you need to order it on the database side. With such requirements you are better off storing translations inside your database tables. While there are guides, and also an opensource framework on the internet that implement i18n with one centralized translation-table that holds all translations i highly recommend not to follow that idea. The problem with this solution is, that you will have to add one more join for every field that has to be translated, whereas multiple joins for a single table with lots of data can easily become a performanceissue.<br />Its better to follow the approach to create a separate translation-table for every entity. This means that you would have one entity containing simple data, and another one containing only the fields that require translation. Like so:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-VacC_XOpFys/UWWoiXynYII/AAAAAAAAABc/JXllBcRFazE/s1600/i18n_jpa.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="140" src="http://3.bp.blogspot.com/-VacC_XOpFys/UWWoiXynYII/AAAAAAAAABc/JXllBcRFazE/s320/i18n_jpa.png" width="320" /></a></div><br />This schema is pretty normalized and you only have a single join on fetching an entity, while you can still order appropriate.<br /><br />Your entities would look like this:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #505050; font-weight: bold;">@Entity</span><br /><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Book</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String author<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Date releaseDate<span style="color: #303030;">;</span><br /><br />    <span style="color: #505050; font-weight: bold;">@OneToMany</span><br />    <span style="color: #505050; font-weight: bold;">@JoinColumn</span><span style="color: #303030;">(</span>name <span style="color: #303030;">=</span> <span style="background-color: #fff0f0;">"isbn"</span><span style="color: #303030;">)</span><br />    <span style="color: green; font-weight: bold;">private</span> List<span style="color: #303030;">&lt;</span>BookTranslation<span style="color: #303030;">&gt;</span> translations<span style="color: #303030;">;</span><br /><br />    <span style="color: grey;">// constructor, getters and setters -...</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />and that<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #505050; font-weight: bold;">@Entity</span><br /><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookTranslation</span> <span style="color: green; font-weight: bold;">implements</span> Serializable <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Id</span><br />    <span style="color: green; font-weight: bold;">private</span> String locale<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String title<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String description<span style="color: #303030;">;</span><br /><br />    <span style="color: grey;">// constructor, getters and setters -...</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />You could then fetch a book with its translations with:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">select</span> b <span style="color: green; font-weight: bold;">from</span> Book b <span style="color: green; font-weight: bold;">join</span> <span style="color: green; font-weight: bold;">fetch</span> b.translations bt <span style="color: green; font-weight: bold;">where</span> bt.locale <span style="color: #303030;">=</span> <span style="background-color: #fff0f0;">'de'</span>;<br /></pre></div><br />If you cannot accept your ServiceLayer to deliver two entities for every Book only because of translations, i suggest you to implement some <a href="http://en.wikipedia.org/wiki/Data_transfer_object">DTO</a> like this BookTO which holds all values.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookTO</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> <span style="color: #303090; font-weight: bold;">int</span> isbn<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String author<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Date releaseDate<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String title<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> String description<span style="color: #303030;">;</span><br /><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />You'd just need to map the values of Book and BookTranslation to BookTO within your ServiceLayer and also return BookTO instead of Book in your ServiceLayer.<br /><br />This solution might not always be the most appropriate, but it definitely comes in handy sometimes. 
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/04/10/i18n-of-jpa-entities.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/24/automated-class-diagrams-using-maven.html">
        Automatically generated Class Diagrams using Maven & UMLGraph
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">24 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      Drawing Class Diagrams preemptive is sometimes nice to optimize your thought of design. But it will still most likely change in the development phase. Since your Class Diagram is part of your documentation it should be up to date all the time. There is no point in having a Class Diagram if the code does not fit it. You could keep adapting the changes to the Class Diagram by hand, but that can get very time-consuming and exhausting. You should rather automate that process, and there are several ways to achieve exactly that. You could for example search for a UML Class Diagram Tool supporting roundtrip engineering. There are some commercial, and even some free ones available. Not all of them work very well and it can be a frustrating task to figure out which way to go. You would probably try out some and throw them away because they are just not what you expected.<br />Thats why i want to show you a different approach: Letting a Javadoc Doclet draw the Class Diagrams in build phase and embed them into your javadoc automatically. UMLGraph is such a doclet. It analyzes your code, draws Class Diagrams automatically and embed them into your javadoc.<br /><br />Since maven can run javadoc at build phase it's perfect. You just have to configurate the maven-javadoc-plugin to use UMLGraph.<br /><br /><h3>Configurate Maven to use UMLGraph</h3><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;reporting&gt;</span>                                                                              <br />    <span style="color: #007000;">&lt;plugins&gt;</span>                                                                            <br />        <span style="color: #007000;">&lt;plugin&gt;</span>                                                                         <br />            <span style="color: #007000;">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color: #007000;">&lt;/groupId&gt;</span>                                  <br />            <span style="color: #007000;">&lt;artifactId&gt;</span>maven-javadoc-plugin<span style="color: #007000;">&lt;/artifactId&gt;</span>                                <br />            <span style="color: #007000;">&lt;version&gt;</span>2.9<span style="color: #007000;">&lt;/version&gt;</span>                                                       <br />            <span style="color: #007000;">&lt;configuration&gt;</span>                                                              <br />                <span style="color: #007000;">&lt;doclet&gt;</span>org.umlgraph.doclet.UmlGraphDoc<span style="color: #007000;">&lt;/doclet&gt;</span>                         <br />                <span style="color: #007000;">&lt;docletArtifact&gt;</span>                                                         <br />                    <span style="color: #007000;">&lt;groupId&gt;</span>org.umlgraph<span style="color: #007000;">&lt;/groupId&gt;</span>                                      <br />                    <span style="color: #007000;">&lt;artifactId&gt;</span>umlgraph<span style="color: #007000;">&lt;/artifactId&gt;</span>                                    <br />                    <span style="color: #007000;">&lt;version&gt;</span>5.6<span style="color: #007000;">&lt;/version&gt;</span>                                               <br />                <span style="color: #007000;">&lt;/docletArtifact&gt;</span>                                                        <br />                <span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span>                           <br />                <span style="color: #007000;">&lt;useStandardDocletOptions&gt;</span>true<span style="color: #007000;">&lt;/useStandardDocletOptions&gt;</span>                <br />            <span style="color: #007000;">&lt;/configuration&gt;</span>                                                             <br />        <span style="color: #007000;">&lt;/plugin&gt;</span>                                                                        <br />    <span style="color: #007000;">&lt;/plugins&gt;</span>                                                                           <br /><span style="color: #007000;">&lt;/reporting&gt;</span>                                                                             <br /></pre></td></tr></tbody></table></div><br /><span style="color: red;">Beware that the javadoc doclet api has changed from jdk 1.6 to jdk 1.7 and most of the online tutorials are outdated because of that. UMLGraph adapted to jdk 1.7 since <a href="http://www.umlgraph.org/ver.html">version 5.5</a>.</span><br /><br />If we run <u>mvn site</u> right now, we will just get that error:<br /><b><span class="postbody"><a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: Cannot run program "dot": <a class="api" href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html" target="_new" title="Java API">java.io.IOException</a>: error=2, No such file or directory&nbsp;</span></b><br /><span class="postbody">This means that the program dot was not found which is a part of the graphviz library.</span><br /><span class="postbody">&nbsp;</span><b><span class="postbody"> </span></b><br /><h3>Install Graphviz</h3>For UMLGraph to run you need <a href="http://www.graphviz.org/">graphviz</a> installed. Go to the Download Page, and choose your package. On linux you could even <i><b>sudo aptget install graphviz</b></i>. Beware that you might have to reboot or relogin to use graphviz, because the Systems Path is extended during installation.<br /><br /><h3>First Result</h3>Run <u>mvn site</u>, and open target/site/apidocs/index.html afterwards.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-8GlHL9_JK1M/UU8DCEVCQvI/AAAAAAAAABI/J9hLoWfvcZg/s1600/umlgraph.png" /></a></div><br />As you can see its drawing beautiful and accurate UML Class Diagrams.<br /><br /><h3>Custom Configuration</h3>If you dont want attributes/methods or other extras you are totally free to configurate those graphs. See <a href="http://www.umlgraph.org/doc/cd-opt.html">Class Diagram Options</a>. Just add them to the <br /><pre style="line-height: 125%; margin: 0;"><span style="color: #007000;">&lt;additionalparam&gt;</span>-views -all<span style="color: #007000;">&lt;/additionalparam&gt;</span></pre>tag in pom.xml 
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/03/24/automated-class-diagrams-using-maven.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/16/8-things-you-should-not-be-afraid-of-as.html">
        8 Things you should not be afraid of as a Developer
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">16 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <h3>Change</h3>In Software Development there is no such thing as stagnancy. Everything you develop now is just another version of a component that will probably change in the future. Change is the most common thing in Software Development, and you're better of accepting it as a fact. Expect future changes to everything you develop, and therefor design your Code more modular. This makes changes more easy and increases the Quality at the same time. Adapt the concepts of <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> and <a href="http://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it">YAGNI</a>. You will often come to the Situation, where you look at your Code and imagine that you could have done that "better". Don't let this thought prevent you from sleeping. Take action immediately and <a href="http://en.wikipedia.org/wiki/Code_refactoring">Refactor</a>! If you don't do it now, you will probably never do it. The longer you wait, the harder and more costly it gets. And you slowly grow up a mess you cant deal with anymore.<br /><blockquote class="tr_bq">"Good code is code that is easy to change. Code tends to change until it is no longer easy to change. All code becomes bad code." - Unknown</blockquote><h3>Removal of dead / commented out Code</h3>If you experience dead or commented out code that is not required anymore, but you dont want to delete it because you dont know if you'll still need it in the future - DELETE IT RIGHT NOW!! Its your versioning tools's job to remember that code, not the comment's!!!! I've seen too much software filled with tons of commented out Code that no one can even remember any more. And then if you cant remember, you are easily even more afraid to delete it. Well, just delete it - now - for real.<br /><blockquote class="tr_bq">"Perfection is achieved, not when there is nothing more to add, but when there is nothing left to take away." - Antoine de Saint-Exupery</blockquote><h3>Making Mistakes</h3>Nobody is perfect and everyone makes mistakes. Making mistakes is a process of learning. There is no improvement if you don't make or recognize any mistakes. So: Everytime you make a mistake, you learn something new greatly improving your knowledge. The more mistakes you make and recognize the better you get. Also, there is no point in hiding your mistakes or feeling ashamed for them. Being honest and frankly about your mistakes makes you a great character and a reliable colleague. Therefor criticism, in a constructive way, is an important tool for successful teams.<br /><blockquote class="tr_bq">"Anyone who has never made a mistake has never tried anything new." - Albert Einstein</blockquote><h3>Showing your code to others</h3>Are you afraid of other people reviewing your code? Why is that? Did you not write as good as you could have? Well, then its probably not an adequate job for you. Are you afraid that you have made any mistakes? Well you shouldn't - because you could benefit of every mistake that you have made that is found in the review - see "Making Mistakes". You should always write your code as thoughtful as you can. Therefor you should rather be proud of what you have written, and not be afraid of others having a look at it.<br /><br /><h3>Failure</h3>And this is one of the most important. If you come to a point where you dont see any solution for your problem: Never give up hope. Take it as a challenge. Try to see things from another angle or explain to other people. Maybe you are just stuck in the wrong perspective. Successfully solving this ridiculous puzzle will make you an even stronger Developer.<br /><blockquote class="tr_bq">"I have not failed. I've just found 10,000 ways that won't work." - Thomas A. Edison</blockquote><h3>Your own codes stability</h3>Everyone knows this situation. You come to present your project to your boss or the customer, and you start worrying: "Will it work this time!? Hopefully i havent overlooked anything in the process of development!". This is a bad sign, and you shouldn't have to worry. You should rather have tested your project deliberately earlier. Of course, You can never make&nbsp; 100% sure that it works perfectly. But you can greatly improve the trust in your code by writing automated tests. It makes you feel more comfortable adapting changes and showcasing your software.<br /><br /><h3>New &amp; Complex Technology</h3>Developers are lazy and often sit on their "good ol" technology way too hard. IT is improving incredibly fast, new and better technology is born every day. Be open minded, read blogs and stay up to date. If a technology/framework seems to exactly fit your needs, give it a try. Also show it to your colleagues an spread the word. <a href="http://www.datamation.com/data-center/when-developers-are-afraid-to-try-something-new-1.html">This</a> is a great story about developers being afraid to try something new.<br /><br /><h3>Fighting Time Pressure</h3>Do not ever let time pressure ruin the Quality of your Project. It is your Job to keep your Code clean and stable. Quality requires deliberate decision making and takes time. And sometimes you need to fight for it. Your customer expects a 100%, maybe even 120%, complete Product that is maintainable and state-of-the-art. If you let the quality down and deliver a poor Result, you will end up in even more changerequests, maintenance effort and distrust. The time you saved earlier will be eaten up by the technical debt that you allowed. Also if you allow a single leak, the inhibition of allowing many more significantly drops. Be honest with your boss and show some backbone when it comes to Quality.<br /><blockquote class="tr_bq">"Programming is like sex: one mistake and you’re providing support for a lifetime." - Michael Sinz</blockquote>
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/03/16/8-things-you-should-not-be-afraid-of-as.html#comments">to the comments</a></p>
  </article>
  
  
  
  <article class="post-body">
    <h2 class="post-title">
      <a href="/2013/03/09/wanna-cache-decorate.html">
        Wanna Cache? Decorate!!
      </a>
    </h2>
    <div class="post-meta">
  <span class="post-date">09 Mar 2013</span>
  <span class="post-categories">
    
  </span>
</div>


    
      <h2>The Decorator Pattern</h2>Class Diagram: <br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-5tWIyDICVvM/UTtSn3qThiI/AAAAAAAAAAg/AYI4tvgmpyA/s1600/decorator_pattern.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-5tWIyDICVvM/UTtSn3qThiI/AAAAAAAAAAg/AYI4tvgmpyA/s1600/decorator_pattern.png" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br />Decorator Pattern is one of the most powerful Design Patterns, and its important to understand why. It allows you to add functionality to a Class without changing it. You use delegation instead of inheritance by just wrapping the existing Class in a "Suite" of your choice while the Interface stays the same. This way, you can even wrap a Class into multiple layers of Decorators where every Layer has its own and different purpose, and the Original Class even stays the same. Other than that the Layers are completely interchangeable and removable, because they all have the same Interface.<br />You can use your naked Object in the same manner as a decorated one with multiple Layers, and the rest of the Application wont even notice. Other components dont need to know whether a Class is decorated or not, because the only thing they care about is the Interface. The following Graphic should clear things up:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-gQHsPM_WUD0/UTtTP8ndLhI/AAAAAAAAAAo/33AtWE7cvNM/s1600/cache_decorator_steps.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-gQHsPM_WUD0/UTtTP8ndLhI/AAAAAAAAAAo/33AtWE7cvNM/s1600/cache_decorator_steps.png" /></a></div>Just follow the Steps:<br />In the first example there is no Decorator. So SomeClass directly speaks to BookService<br />In the second example there is a single Decorator. Therefore the following steps apply<br /><ol><li>SomeClass calls SomeDecoratorA.</li><li>SomeDecoratorA delegates the call to the real BookService. The Decorator could even manipulate the call in this step.</li><li>BookService returns a result. SomeDecoratorA now holds the result, and may manipulate it.</li><li>Finally, SomeDecoratorA hands the result over to the original caller SomeClass.</li></ol>In the third example, there are even 2 Nested Decorators. Since every Decorator speaks the Interface of the BookService Class you can wrap an infinite amount of Decorators upon.<br /><br /><h3>Usage Examples</h3>Most examples in Books and online Guides describe the Decorator Pattern used by some Graphic related stuff. You would have a normal line, and a line decorated with a shadow. Another example would be a Window in a GUI where you vary Decorators that add different kinds of styles (e.g. different Colors).<br /><br />But its important to understand, that Decorators are not intended to just make Styling more dynamic. It is just one way to use them. Instead, there are many more great use cases for Decorators and i will show you an example applying cache functionality.<br /><br /><h3>Applying Cache with Decorator Pattern</h3>Class Diagram:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-QeqCL_o0nQo/UTtV93LNgLI/AAAAAAAAAAw/SAP7zX3arnE/s1600/decorator_cache.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-QeqCL_o0nQo/UTtV93LNgLI/AAAAAAAAAAw/SAP7zX3arnE/s1600/decorator_cache.png" /></a></div><br />As you can see i am adding a BookServiceCacheDecorator that holds a Cache Component which temporarily stores a List of Books. The BookServiceCacheDecorator in the first place asks the Cache if there is a result available. If thats true, the decorator will use the cached result. Otherwise it will fetch the Result of the BookService itself, and store the Result in the Cache for later use.<br /><br />I start with the BookService Interface,<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">interface</span> <span style="color: #b00060; font-weight: bold;">BookService</span> <span style="color: #303030;">{</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">();</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />and its prime implementation.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceImpl</span> <span style="color: green; font-weight: bold;">implements</span> BookService <span style="color: #303030;">{</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Override</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />        System<span style="color: #303030;">.</span><span style="color: #0000c0;">out</span><span style="color: #303030;">.</span><span style="color: #0000c0;">println</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"load new data"</span><span style="color: #303030;">);</span><br />        List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> ArrayList<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;();</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookA"</span><span style="color: #303030;">));</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookB"</span><span style="color: #303030;">));</span><br />        books<span style="color: #303030;">.</span><span style="color: #0000c0;">add</span><span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> Book<span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"BookC"</span><span style="color: #303030;">));</span><br />        <span style="color: green; font-weight: bold;">return</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Here is the Code of the Cache Class. In this example it's caching forever, but thats alright.<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">Cache</span> <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> storage<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">void</span> <span style="color: #0060b0; font-weight: bold;">save</span><span style="color: #303030;">(</span>List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books<span style="color: #303030;">){</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">storage</span> <span style="color: #303030;">=</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #303090; font-weight: bold;">boolean</span> <span style="color: #0060b0; font-weight: bold;">hasResult</span><span style="color: #303030;">(){</span><br />        <span style="color: green; font-weight: bold;">if</span><span style="color: #303030;">(</span>storage <span style="color: #303030;">!=</span> <span style="color: green; font-weight: bold;">null</span><span style="color: #303030;">){</span><br />            <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">true</span><span style="color: #303030;">;</span><br />        <span style="color: #303030;">}</span><br /><br />        <span style="color: green; font-weight: bold;">return</span> <span style="color: green; font-weight: bold;">false</span><span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> load<span style="color: #303030;">(){</span><br />        System<span style="color: #303030;">.</span><span style="color: #0000c0;">out</span><span style="color: #303030;">.</span><span style="color: #0000c0;">println</span><span style="color: #303030;">(</span><span style="background-color: #fff0f0;">"load from cache"</span><span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">return</span> storage<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Now lets continue with the Decorator Base Class. It has a preemtive Constructor to hand over the decorated Object.<br /><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">abstract</span> <span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceDecorator</span> <span style="color: green; font-weight: bold;">implements</span> BookService<span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">protected</span> BookService decorated<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">){</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">decorated</span> <span style="color: #303030;">=</span> decorated<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />And finally the CacheDecorator. It Checks the Cache before calling BookServiceImpl.<br /><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;"> 1<br /> 2<br /> 3<br /> 4<br /> 5<br /> 6<br /> 7<br /> 8<br /> 9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23</pre></td><td><pre style="line-height: 125%; margin: 0;"><span style="color: green; font-weight: bold;">public</span> <span style="color: green; font-weight: bold;">class</span> <span style="color: #b00060; font-weight: bold;">BookServiceCacheDecorator</span> <span style="color: green; font-weight: bold;">extends</span> BookServiceDecorator <span style="color: #303030;">{</span><br /><br />    <span style="color: green; font-weight: bold;">private</span> Cache cache<span style="color: #303030;">;</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceCacheDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">super</span><span style="color: #303030;">(</span>decorated<span style="color: #303030;">);</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: green; font-weight: bold;">public</span> <span style="color: #0060b0; font-weight: bold;">BookServiceCacheDecorator</span><span style="color: #303030;">(</span>BookService decorated<span style="color: #303030;">,</span> Cache cache<span style="color: #303030;">)</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">super</span><span style="color: #303030;">(</span>decorated<span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">this</span><span style="color: #303030;">.</span><span style="color: #0000c0;">cache</span> <span style="color: #303030;">=</span> cache<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><br />    <span style="color: #505050; font-weight: bold;">@Override</span><br />    <span style="color: green; font-weight: bold;">public</span> List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> findAll<span style="color: #303030;">()</span> <span style="color: #303030;">{</span><br />        <span style="color: green; font-weight: bold;">if</span><span style="color: #303030;">(</span>cache<span style="color: #303030;">.</span><span style="color: #0000c0;">hasResult</span><span style="color: #303030;">()){</span><br />            <span style="color: green; font-weight: bold;">return</span> cache<span style="color: #303030;">.</span><span style="color: #0000c0;">load</span><span style="color: #303030;">();</span><br />        <span style="color: #303030;">}</span><br />        List<span style="color: #303030;">&lt;</span>Book<span style="color: #303030;">&gt;</span> books <span style="color: #303030;">=</span> decorated<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span><br />        cache<span style="color: #303030;">.</span><span style="color: #0000c0;">save</span><span style="color: #303030;">(</span>books<span style="color: #303030;">);</span><br />        <span style="color: green; font-weight: bold;">return</span> books<span style="color: #303030;">;</span><br />    <span style="color: #303030;">}</span><br /><span style="color: #303030;">}</span><br /></pre></td></tr></tbody></table></div><br />Now two different use cases. One without Decorator, and one with the Cache Decorator:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; background: white; border-width: .1em .1em .1em .8em; border: solid gray; color: black; overflow: auto; padding: .2em .6em; width: auto;"><table><tbody><tr><td><pre style="line-height: 125%; margin: 0;">1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9</pre></td><td><pre style="line-height: 125%; margin: 0;">BookService bookService <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> BookServiceImpl<span style="color: #303030;">();</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />bookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br /><br />BookService cachedBookService <span style="color: #303030;">=</span> <span style="color: green; font-weight: bold;">new</span> BookServiceCacheDecorator<span style="color: #303030;">(</span><span style="color: green; font-weight: bold;">new</span> BookServiceImpl<span style="color: #303030;">(),</span> <span style="color: green; font-weight: bold;">new</span> Cache<span style="color: #303030;">());</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load new data</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load from cache</span><br />cachedBookService<span style="color: #303030;">.</span><span style="color: #0000c0;">findAll</span><span style="color: #303030;">();</span> <span style="color: grey;">// prints: load from cache</span><br /></pre></td></tr></tbody></table></div><br />Thats basically it. Just read the Code carefully. The final use cases should make clear how the Decorator applies functionality. Decorator pattern really helps you create a very modular Code in many circumstances. You should not be afraid of the additional Classes the Pattern depends on, since they are really not a big deal. The modularity gained easily outweighs them.
    

    
      
      
      

      
    

    <p><br /><a class="comments_link" href="/2013/03/09/wanna-cache-decorate.html#comments">to the comments</a></p>
  </article>
  
  

  
<div class="pagination">
  <a class="pagination-item older"
     href="/blog/page/4/index.html">
    Older
  </a>
</div>


</div>

    </main>

    <!-- Optional footer content -->

  </body>
</html>
